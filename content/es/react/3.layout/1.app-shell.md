---
title: Construir el App Shell - Layout y NavegaciÃ³n
description: Construye un layout de foro listo para producciÃ³n con navbar responsivo, sidebar y estructura de routing. Aprende patrones de layout, composiciÃ³n de componentes y diseÃ±o responsivo.
---

# Disclaimer

:::u-alert
---
title: Los comentarios en el cÃ³digo son solo educativos.
description: En proyectos reales, evita comentarios irrelevantes o redundantes.
color: warning
variant: subtle
icon: i-lucide-triangle-alert
---
:::

Antes de construir funcionalidades, necesitamos el **app shell** - el layout que envuelve todas las pÃ¡ginas. Esto incluye la navbar, sidebar, footer y estructura de routing.

---

## Fundamentos de React: Conceptos Esenciales

Antes de sumergirnos en el app shell, revisemos los conceptos de React que usaremos en esta secciÃ³n.

### Â¿QuÃ© es React?

**React** es una librerÃ­a de JavaScript para construir interfaces de usuario con **componentes**.

**Idea clave**: La UI es una funciÃ³n del estado.

```
Estado â†’ Componente â†’ UI
```

Cuando el estado cambia, React vuelve a renderizar el componente y actualiza la UI.

### Componentes: Bloques de ConstrucciÃ³n

Un **componente** es una funciÃ³n de JavaScript que devuelve JSX (UI).

```tsx
// Componente simple
function Welcome() {
  return <h1>Â¡Bienvenido a nuestro foro!</h1>
}

// Componente con props
function Greeting({ name }) {
  return <h1>Â¡Hola, {name}!</h1>
}

// Uso
<Welcome />
<Greeting name="Alice" />
```

### JSX: HTML en JavaScript

**JSX** parece HTML pero es JavaScript.

```tsx
// JSX
const element = <h1>Hola</h1>

// Compila a JavaScript
const element = React.createElement('h1', null, 'Hola')
```

**Reglas de JSX:**
- âœ… Devuelve un solo elemento (envuelve en `<>` si es necesario)
- âœ… Usa `className` en lugar de `class`
- âœ… Usa `htmlFor` en lugar de `for`
- âœ… Cierra todas las etiquetas (`<img />` no `<img>`)
- âœ… Usa `{}` para expresiones de JavaScript

### Props: Pasar Datos

**Props** es como se comunican los componentes. Los datos fluyen **hacia abajo** de padre a hijo.

```tsx
// Padre
function App() {
  return <Greeting name="Alice" age={30} />
}

// Hijo recibe props
function Greeting({ name, age }) {
  return <p>{name} tiene {age} aÃ±os</p>
}
```

**Las props son de solo lectura** - no puedes modificarlas dentro del componente.

### useState: AÃ±adir Estado

**Estado** son datos que cambian con el tiempo. Cuando el estado cambia, React vuelve a renderizar el componente.

```tsx
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  
  return (
    <div>
      <p>Conteo: {count}</p>
      <button onClick={() => setCount(count + 1)}>
        Incrementar
      </button>
    </div>
  )
}
```

**Estado vs Props:**
- **Props**: Datos del padre (solo lectura)
- **Estado**: Datos que cambian (mutable via setState)

### Renderizado Condicional

Mostrar/ocultar elementos basados en condiciones.

```tsx
function LoginButton() {
  const [isLoggedIn, setIsLoggedIn] = useState(false)
  
  return (
    <button>
      {isLoggedIn ? 'Cerrar SesiÃ³n' : 'Iniciar SesiÃ³n'}
    </button>
  )
}
```

### React Router: NavegaciÃ³n

**React Router** habilita navegaciÃ³n multi-pÃ¡gina sin recargas completas de pÃ¡gina.

```tsx
import { BrowserRouter, Routes, Route, Link } from 'react-router-dom'

function App() {
  return (
    <BrowserRouter>
      <nav>
        <Link to="/">Inicio</Link>
        <Link to="/about">Acerca de</Link>
      </nav>
      
      <Routes>
        <Route path="/" element={<HomePage />} />
        <Route path="/about" element={<AboutPage />} />
      </Routes>
    </BrowserRouter>
  )
}
```

**Conceptos clave:**
- `<BrowserRouter>`: Habilita routing
- `<Routes>`: Contenedor de rutas
- `<Route>`: Mapea URL a componente
- `<Link>`: NavegaciÃ³n sin recarga de pÃ¡gina
- `<Outlet>`: Donde se renderizan rutas hijas (usado en layouts)

### ComposiciÃ³n de Componentes

Construye UI complejas componiendo componentes simples.

```tsx
function Navbar() {
  return <nav>NavegaciÃ³n</nav>
}

function Sidebar() {
  return <aside>Barra lateral</aside>
}

function Layout() {
  return (
    <div>
      <Navbar />
      <Sidebar />
      <main>Contenido</main>
    </div>
  )
}
```

---

## Â¿QuÃ© es un App Shell?

El **app shell** es el HTML, CSS y JavaScript mÃ­nimos requeridos para alimentar la interfaz de usuario. Es el marco que permanece consistente entre pÃ¡ginas mientras el contenido cambia.

**PiÃ©nsalo como un edificio:**
- **Cimientos**: Routing (React Router)
- **Marco**: Componentes de layout (Navbar, Sidebar, Footer)
- **Habitaciones**: Contenido de pÃ¡gina (CategorÃ­as, Threads, Posts)

**Beneficios:**
- Experiencia de usuario consistente en todas las pÃ¡ginas
- Carga una vez, reutiliza en todas partes
- FÃ¡cil de mantener (cambia navbar una vez, afecta todas las pÃ¡ginas)
- Rendimiento (el layout no se vuelve a renderizar en navegaciÃ³n)

---

## AnÃ¡lisis de DiseÃ±o desde Mockups

Mirando nuestro diseÃ±o de foro, tenemos:

### Layout de PÃ¡ginas PÃºblicas
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Navbar (Logo, Links, BÃºsqueda, Perfil) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Sidebar â”‚        Contenido Principal    â”‚
â”‚ (Filtrosâ”‚      (Lista de Threads)       â”‚
â”‚  CategorÃ­as) â”‚                           â”‚
â”‚         â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layout de Detalle de Thread  
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Navbar                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Breadcrumbs (Inicio > CategorÃ­a > Thread)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Contenido del Thread           â”‚
â”‚           Posts y Respuestas             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Layout de Admin
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Navbar de Admin (Dashboard, Users, etc.)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Contenido de Admin             â”‚
â”‚        (Gestionar CategorÃ­as, etc.)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## JerarquÃ­a de Componentes de Layout

```tsx
App
â”œâ”€ PublicLayout
â”‚  â”œâ”€ Navbar
â”‚  â”œâ”€ Sidebar (opcional, dependiente de ruta)
â”‚  â”œâ”€ Contenido Principal (Outlet)
â”‚  â””â”€ Footer
â”œâ”€ AdminLayout
â”‚  â”œâ”€ AdminNavbar
â”‚  â””â”€ Contenido de Admin (Outlet)
â””â”€ AuthLayout (centrado, sin nav)
   â””â”€ Formulario de Auth (Outlet)
```

---

## React Router: Estructura de la App

```tsx
// src/App.tsx

import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom'
import { PublicLayout } from '@/layouts/PublicLayout'
import { AdminLayout } from '@/layouts/AdminLayout'
import { AuthLayout } from '@/layouts/AuthLayout'

/**
 * Componente App - RaÃ­z de nuestra aplicaciÃ³n
 * 
 * Configura estructura de routing con layouts anidados.
 * Cada layout envuelve mÃºltiples pÃ¡ginas.
 */
export function App() {
  return (
    <BrowserRouter>
      <Routes>
        {/* Rutas pÃºblicas con PublicLayout */}
        <Route element={<PublicLayout />}>
          <Route index element={<HomePage />} />
          <Route path="categories" element={<CategoriesPage />} />
          <Route path="categories/:slug" element={<CategoryDetailPage />} />
          <Route path="threads" element={<ThreadsPage />} />
          <Route path="threads/:slug" element={<ThreadDetailPage />} />
          <Route path="leaderboard" element={<LeaderboardPage />} />
        </Route>

        {/* Rutas de auth con AuthLayout (centrado, sin navbar) */}
        <Route element={<AuthLayout />}>
          <Route path="sign-in" element={<SignInPage />} />
          <Route path="sign-up" element={<SignUpPage />} />
        </Route>

        {/* Rutas de admin con AdminLayout */}
        <Route path="admin" element={<AdminLayout />}>
          <Route index element={<Navigate to="/admin/dashboard" replace />} />
          <Route path="dashboard" element={<AdminDashboard />} />
          <Route path="categories" element={<ManageCategoriesPage />} />
          <Route path="users" element={<ManageUsersPage />} />
          <Route path="settings" element={<AdminSettingsPage />} />
        </Route>

        {/* 404 No Encontrado */}
        <Route path="*" element={<NotFoundPage />} />
      </Routes>
    </BrowserRouter>
  )
}
```

---

## PublicLayout: Layout Principal del Foro

```tsx
// src/layouts/PublicLayout.tsx

import { Outlet, useLocation } from 'react-router-dom'
import { Navbar } from '@/components/layout/Navbar'
import { Sidebar } from '@/components/layout/Sidebar'
import { Footer } from '@/components/layout/Footer'

/**
 * PublicLayout - Layout para pÃ¡ginas pÃºblicas del foro
 * 
 * Componentes:
 * - Navbar: Barra de navegaciÃ³n superior
 * - Sidebar: Barra lateral izquierda (solo en ciertas rutas)
 * - Outlet: Donde se renderizan rutas hijas
 * - Footer: Footer inferior
 * 
 * El componente Outlet es donde React Router renderiza el componente de la ruta hija.
 */
export function PublicLayout() {
  const location = useLocation()

  /**
   * Determinar si se debe mostrar la sidebar
   * 
   * Mostrar sidebar en:
   * - /threads (lista de threads con filtros)
   * - / (homepage con sidebar de categorÃ­as)
   * 
   * Ocultar sidebar en:
   * - /threads/:slug (detalle de thread - ancho completo para legibilidad)
   * - /categories (grid de categorÃ­as necesita ancho completo)
   */
  const showSidebar = 
    location.pathname === '/' ||
    location.pathname === '/threads'

  return (
    <div className="min-h-screen bg-slate-950 text-slate-100 flex flex-col">
      {/* Navbar - Fija en la parte superior */}
      <Navbar />

      {/* Ãrea de contenido principal */}
      <div className="flex-1 flex">
        {/* Sidebar - Renderizado condicional */}
        {showSidebar && (
          <aside className="hidden lg:block w-64 border-r border-slate-800 p-4">
            <Sidebar />
          </aside>
        )}

        {/* Contenido principal - Outlet renderiza rutas hijas aquÃ­ */}
        <main className="flex-1">
          {/**
           * Outlet es donde se renderizan los componentes de rutas hijas
           * 
           * Ejemplo: En /threads, ThreadsPage se renderiza aquÃ­
           */}
          <Outlet />
        </main>
      </div>

      {/* Footer */}
      <Footer />
    </div>
  )
}
```

### Entendiendo Outlet

**Outlet** es la forma de React Router de renderizar rutas hijas.

```tsx
// En App.tsx
<Route element={<PublicLayout />}>
  <Route path="threads" element={<ThreadsPage />} />
</Route>

// PublicLayout renderiza:
<div>
  <Navbar />
  <Outlet />  {/* ThreadsPage se renderiza AQUÃ */}
  <Footer />
</div>
```

**Visual:**
```
Usuario visita /threads
  â†’ React Router coincide con Route
  â†’ Renderiza PublicLayout
  â†’ PublicLayout tiene <Outlet />
  â†’ Outlet renderiza ThreadsPage
  â†’ DOM final:
     <Navbar />
     <ThreadsPage />
     <Footer />
```

---

## Componente Navbar

```tsx
// src/components/layout/Navbar.tsx

import { Link, useNavigate } from 'react-router-dom'
import { useState } from 'react'
import { useAuth } from '@/features/auth/hooks/useAuth'

/**
 * Navbar - Barra de navegaciÃ³n superior
 * 
 * CaracterÃ­sticas:
 * - Logo + nombre de marca
 * - Enlaces de navegaciÃ³n (Inicio, Threads, CategorÃ­as, etc.)
 * - Barra de bÃºsqueda
 * - Icono de notificaciones
 * - MenÃº de usuario (avatar + dropdown)
 * - Responsivo: MenÃº hamburguesa en mÃ³vil
 */
export function Navbar() {
  const { user, isAuthenticated } = useAuth()
  const navigate = useNavigate()
  const [searchQuery, setSearchQuery] = useState('')

  /**
   * Manejar envÃ­o de bÃºsqueda
   */
  const handleSearch = (e: React.FormEvent) => {
    e.preventDefault()
    if (searchQuery.trim()) {
      navigate(`/search?q=${encodeURIComponent(searchQuery)}`)
    }
  }

  return (
    <nav className="sticky top-0 z-50 bg-slate-900/95 backdrop-blur border-b border-slate-800">
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between h-16">
          {/* Logo + Marca */}
          <div className="flex items-center gap-8">
            {/* Logo */}
            <Link to="/" className="flex items-center gap-2">
              <div className="text-2xl">ğŸ’¬</div>
              <span className="text-xl font-bold text-slate-100">Forum</span>
            </Link>

            {/* Enlaces de NavegaciÃ³n - Ocultos en mÃ³vil */}
            <div className="hidden md:flex items-center gap-6">
              <NavLink to="/">Inicio</NavLink>
              <NavLink to="/threads">Threads</NavLink>
              <NavLink to="/categories">CategorÃ­as</NavLink>
              <NavLink to="/leaderboard">Tabla de Posiciones</NavLink>
            </div>
          </div>

          {/* Lado derecho: BÃºsqueda + Usuario */}
          <div className="flex items-center gap-4">
            {/* Barra de BÃºsqueda */}
            <form onSubmit={handleSearch} className="hidden md:block">
              <div className="relative">
                <input
                  type="text"
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  placeholder="Buscar..."
                  className="w-64 px-4 py-2 pl-10 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500"
                />
                <div className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-500">
                  ğŸ”
                </div>
              </div>
            </form>

            {isAuthenticated ? (
              <>
                {/* Notificaciones */}
                <button className="relative p-2 text-slate-400 hover:text-slate-200">
                  ğŸ””
                  {/* Badge de notificaciÃ³n */}
                  <span className="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full" />
                </button>

                {/* Avatar de Usuario + Dropdown */}
                <UserMenu user={user!} />
              </>
            ) : (
              /* Botones de auth para invitados */
              <div className="flex items-center gap-2">
                <Link
                  to="/sign-in"
                  className="px-4 py-2 text-slate-200 hover:text-white"
                >
                  Iniciar SesiÃ³n
                </Link>
                <Link
                  to="/sign-up"
                  className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                >
                  Registrarse
                </Link>
              </div>
            )}
          </div>
        </div>
      </div>
    </nav>
  )
}

/**
 * NavLink - Enlace activo con resaltado
 */
function NavLink({ to, children }: { to: string; children: React.ReactNode }) {
  const location = useLocation()
  const isActive = location.pathname === to

  return (
    <Link
      to={to}
      className={`text-sm font-medium transition-colors ${
        isActive
          ? 'text-slate-100'
          : 'text-slate-400 hover:text-slate-200'
      }`}
    >
      {children}
    </Link>
  )
}

/**
 * UserMenu - MenÃº desplegable para usuarios autenticados
 */
function UserMenu({ user }: { user: User }) {
  const [isOpen, setIsOpen] = useState(false)
  const { signOut } = useAuth()

  return (
    <div className="relative">
      {/* BotÃ³n de avatar */}
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="flex items-center gap-2"
      >
        <img
          src={user.avatarUrl || '/avatars/default.png'}
          alt={user.displayName}
          className="w-8 h-8 rounded-full"
        />
      </button>

      {/* MenÃº desplegable */}
      {isOpen && (
        <>
          {/* Backdrop para cerrar menÃº */}
          <div
            className="fixed inset-0 z-10"
            onClick={() => setIsOpen(false)}
          />

          {/* MenÃº */}
          <div className="absolute right-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-20">
            <div className="p-3 border-b border-slate-700">
              <p className="font-medium text-slate-100">{user.displayName}</p>
              <p className="text-sm text-slate-400">@{user.username}</p>
            </div>

            <div className="py-2">
              <MenuItem to={`/users/${user.username}`} icon="ğŸ‘¤">
                Perfil
              </MenuItem>
              <MenuItem to="/settings" icon="âš™ï¸">
                ConfiguraciÃ³n
              </MenuItem>
              {user.role === 'admin' && (
                <MenuItem to="/admin" icon="ğŸ›¡ï¸">
                  Panel de Admin
                </MenuItem>
              )}
            </div>

            <div className="border-t border-slate-700 py-2">
              <button
                onClick={signOut}
                className="w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-slate-700"
              >
                Cerrar SesiÃ³n
              </button>
            </div>
          </div>
        </>
      )}
    </div>
  )
}

function MenuItem({ to, icon, children }: { to: string; icon: string; children: React.ReactNode }) {
  return (
    <Link
      to={to}
      className="flex items-center gap-3 px-4 py-2 text-sm text-slate-300 hover:bg-slate-700"
    >
      <span>{icon}</span>
      <span>{children}</span>
    </Link>
  )
}
```

---

## Avanzado: Componente <Activity> (React 19)

**Problema**: Al ocultar UI con CSS (`display: none`), el estado del componente se preserva pero estÃ¡ oculto. Al mostrarlo de nuevo, el estado sigue ahÃ­. A veces quieres desmontar/volver a montar completamente.

**SoluciÃ³n**: `<Activity>` oculta y restaura UI mientras preserva el estado interno automÃ¡ticamente.

### Â¿QuÃ© es <Activity>?

`<Activity>` es un nuevo componente de React 19 que:
- âœ… Oculta UI sin eliminar del DOM
- âœ… Preserva estado interno
- âœ… Restaura estado cuando se muestra de nuevo
- âœ… Mejor que CSS `display: none` para componentes complejos

**Casos de uso:**
- Modales que preservan estado de formulario
- Sidebars que recuerdan posiciÃ³n de scroll
- Tabs que recuerdan estado interno
- MenÃºs offcanvas

### CÃ³mo Funciona

```tsx
import { Activity } from 'react'
import { useState } from 'react'

function App() {
  const [showModal, setShowModal] = useState(false)
  
  return (
    <div>
      <button onClick={() => setShowModal(!showModal)}>
        Toggle Modal
      </button>
      
      {/* Activity preserva estado dentro de CreateCategoryModal */}
      <Activity active={showModal}>
        <CreateCategoryModal onClose={() => setShowModal(false)} />
      </Activity>
    </div>
  )
}
```

### Ejemplo del Mundo Real: Modal con Estado de Formulario

```tsx
import { Activity } from 'react'
import { useState } from 'react'

/**
 * Componente Modal con estado de formulario interno
 */
function CreateCategoryModal({ onClose }: { onClose: () => void }) {
  // Este estado se preserva cuando el modal estÃ¡ oculto con <Activity>
  const [name, setName] = useState('')
  const [description, setDescription] = useState('')
  const [isSubmitting, setIsSubmitting] = useState(false)

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsSubmitting(true)
    
    try {
      await apiClient.post('/categories', { name, description })
      setName('')
      setDescription('')
      onClose()
    } finally {
      setIsSubmitting(false)
    }
  }

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center">
      <div className="bg-slate-900 p-6 rounded-lg w-full max-w-md">
        <h2 className="text-2xl font-bold mb-4">Crear CategorÃ­a</h2>
        
        <form onSubmit={handleSubmit} className="space-y-4">
          <div>
            <label className="block text-sm font-medium mb-2">Nombre</label>
            <input
              value={name}
              onChange={(e) => setName(e.target.value)}
              placeholder="Nombre de categorÃ­a"
              className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
            />
          </div>

          <div>
            <label className="block text-sm font-medium mb-2">DescripciÃ³n</label>
            <textarea
              value={description}
              onChange={(e) => setDescription(e.target.value)}
              placeholder="DescripciÃ³n de categorÃ­a"
              className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
            />
          </div>

          <div className="flex gap-2">
            <button
              type="submit"
              disabled={isSubmitting}
              className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
            >
              {isSubmitting ? 'Creando...' : 'Crear'}
            </button>
            <button
              type="button"
              onClick={onClose}
              className="flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600"
            >
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>
  )
}

/**
 * App con modal
 */
export function App() {
  const [showCreateModal, setShowCreateModal] = useState(false)

  return (
    <div>
      <button
        onClick={() => setShowCreateModal(true)}
        className="px-4 py-2 bg-blue-600 text-white rounded-lg"
      >
        Crear CategorÃ­a
      </button>

      {/* Activity preserva estado del formulario cuando el modal estÃ¡ oculto */}
      <Activity active={showCreateModal}>
        <CreateCategoryModal onClose={() => setShowCreateModal(false)} />
      </Activity>
    </div>
  )
}
```

### <Activity> vs CSS display: none

| Aspecto | CSS display | <Activity> |
|--------|------------|-----------|
| **Visibilidad** | Oculto pero en DOM | Oculto, estado preservado |
| **Estado** | Preservado | Preservado automÃ¡ticamente |
| **Rendimiento** | Sigue renderizando | No renderiza cuando estÃ¡ oculto |
| **Transiciones** | CSS manual | Soporte incorporado |
| **Caso de uso** | Ocultar simple | Componentes complejos |

### Ejemplo de Sidebar con <Activity>

```tsx
export function App() {
  const [sidebarOpen, setSidebarOpen] = useState(false)

  return (
    <div className="flex">
      {/* Sidebar con Activity */}
      <Activity active={sidebarOpen}>
        <Sidebar onClose={() => setSidebarOpen(false)} />
      </Activity>

      {/* Contenido principal */}
      <main className="flex-1">
        <button onClick={() => setSidebarOpen(!sidebarOpen)}>
          Toggle Sidebar
        </button>
        
        {/* Contenido aquÃ­ */}
      </main>
    </div>
  )
}

function Sidebar({ onClose }: { onClose: () => void }) {
  // El estado se preserva cuando el sidebar estÃ¡ oculto
  const [expandedCategory, setExpandedCategory] = useState<string | null>(null)
  const [searchQuery, setSearchQuery] = useState('')

  return (
    <aside className="w-64 bg-slate-900 border-r border-slate-800 p-4">
      <input
        value={searchQuery}
        onChange={(e) => setSearchQuery(e.target.value)}
        placeholder="Buscar categorÃ­as..."
        className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg mb-4"
      />

      {/* CategorÃ­as con estado expandido preservado */}
      {categories.map(cat => (
        <div key={cat.id}>
          <button
            onClick={() => setExpandedCategory(
              expandedCategory === cat.id ? null : cat.id
            )}
          >
            {cat.name}
          </button>

          {expandedCategory === cat.id && (
            <div className="ml-4">
              {/* SubcategorÃ­as */}
            </div>
          )}
        </div>
      ))}
    </aside>
  )
}
```

### Beneficios Clave

âœ… **PreservaciÃ³n de estado** - Datos de formulario no se pierden al ocultar
âœ… **Mejor UX** - Los usuarios no pierden su progreso
âœ… **AutomÃ¡tico** - No se necesita gestiÃ³n manual de estado
âœ… **Rendimiento** - No renderiza cuando estÃ¡ oculto
âœ… **Transiciones suaves** - Soporte de animaciÃ³n incorporado

### CuÃ¡ndo Usar <Activity>

- âœ… Modales con formularios
- âœ… Sidebars con estado interno
- âœ… Tabs con estado preservado
- âœ… MenÃºs offcanvas
- âœ… Secciones ocultas que necesitan preservaciÃ³n de estado

---

## DiseÃ±o Responsivo

Nuestra navbar se adapta al tamaÃ±o de pantalla:

**Desktop (â‰¥ 768px):**
- Enlaces de navegaciÃ³n completos visibles
- Barra de bÃºsqueda visible
- MenÃº de usuario

**MÃ³vil (< 768px):**
- Logo + menÃº hamburguesa
- Enlaces de nav ocultos (mostrar en menÃº mÃ³vil)
- BÃºsqueda oculta (mostrar en menÃº mÃ³vil)

```tsx
// Estado de menÃº mÃ³vil
const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)

// BotÃ³n de menÃº mÃ³vil
<button
  onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}
  className="md:hidden p-2 text-slate-400"
>
  â˜°
</button>

// MenÃº mÃ³vil
{isMobileMenuOpen && (
  <div className="md:hidden absolute top-16 left-0 right-0 bg-slate-900 border-b border-slate-800">
    {/* Enlaces de nav mÃ³viles */}
  </div>
)}
```

---

## Resumen

### Conceptos Clave

1. **App Shell**: Estructura de layout reutilizable
2. **Rutas Anidadas**: Los layouts envuelven mÃºltiples pÃ¡ginas
3. **Outlet**: Espacio de React Router para rutas hijas
4. **Renderizado Condicional**: Mostrar/ocultar sidebar basado en ruta
5. **DiseÃ±o Responsivo**: Adaptar al tamaÃ±o de pantalla

### Patrones de Layout

- **Navbar Sticky**: `sticky top-0` se queda arriba al hacer scroll
- **Backdrop Blur**: `backdrop-blur` para efecto glassmorphism
- **Layout Flexbox**: `flex flex-col` para layout de altura completa
- **Capas Z-index**: Navbar (50) > Dropdown (20) > Backdrop (10)

---

Next: [Sidebar & Filters â†’](/es/react/3.layout/2.sidebar-filters)
