---
title: Sidebar & Filters - NavegaciÃ³n DinÃ¡mica
description: Construye una sidebar dinÃ¡mica con navegaciÃ³n de categorÃ­as, filtros y responsividad mÃ³vil. Aprende gestiÃ³n de estado entre rutas y patrones de UI persistentes.
---

# Disclaimer

:::u-alert
---
title: Los comentarios en el cÃ³digo son solo educativos.
description: En proyectos reales, evita comentarios irrelevantes o redundantes.
color: warning
variant: subtle
icon: i-lucide-triangle-alert
---
:::

La sidebar proporciona navegaciÃ³n rÃ¡pida y filtrado. Es consciente del contexto: mostrando contenido diferente basado en la pÃ¡gina actual.

**Prerrequisitos**: AsegÃºrate de haber leÃ­do [App Shell](/es/react/3.layout/1.app-shell) primero, que cubre fundamentos de React como `useState`, `useLocation` y renderizado condicional.

---

## Contextos de Sidebar

Nuestra sidebar cambia basada en la ruta:

| Ruta | Contenido de Sidebar |
|-------|----------------|
| `/threads` | Filtros de threads (Todos, Mis Threads, Marcados, etc.) + CategorÃ­as |
| `/` (Inicio) | Lista de categorÃ­as + EstadÃ­sticas rÃ¡pidas |
| Otros | Oculta (detalle de thread, pÃ¡ginas de auth) |

---

## Componente Sidebar

```tsx
// src/components/layout/Sidebar.tsx

import { useLocation } from 'react-router-dom'
import { ThreadFilters } from './ThreadFilters'
import { CategoriesNav } from './CategoriesNav'

/**
 * Sidebar - NavegaciÃ³n y filtros contextuales
 * 
 * Muestra contenido diferente basado en la ruta actual.
 * Posicionamiento sticky lo mantiene visible al hacer scroll.
 */
export function Sidebar() {
  const location = useLocation()

  /**
   * Renderizar contenido de sidebar diferente basado en ruta
   */
  if (location.pathname === '/threads') {
    return <ThreadsSidebar />
  }

  if (location.pathname === '/') {
    return <HomeSidebar />
  }

  return null
}

/**
 * ThreadsSidebar - Filtros para pÃ¡gina de threads
 * 
 * Permite a los usuarios filtrar threads por:
 * - Todos los threads
 * - Mis threads (creados por mÃ­)
 * - Actividad reciente
 * - Threads marcados
 * - Por categorÃ­a
 */
function ThreadsSidebar() {
  return (
    <div className="sticky top-20 space-y-6">
      {/* BotÃ³n Nuevo Thread */}
      <Link
        to="/threads/new"
        className="flex items-center justify-center gap-2 w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium"
      >
        <span>âœï¸</span>
        <span>Nuevo Thread</span>
      </Link>

      {/* Filtros de Thread */}
      <div>
        <h3 className="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-3">
          Filtros
        </h3>
        <ThreadFilters />
      </div>

      {/* NavegaciÃ³n de CategorÃ­as */}
      <div>
        <h3 className="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-3">
          CategorÃ­as
        </h3>
        <CategoriesNav />
      </div>
    </div>
  )
}

/**
 * HomeSidebar - NavegaciÃ³n rÃ¡pida para homepage
 */
function HomeSidebar() {
  return (
    <div className="sticky top-20 space-y-6">
      {/* EstadÃ­sticas RÃ¡pidas */}
      <div className="p-4 bg-slate-900 rounded-lg border border-slate-800">
        <h3 className="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-3">
          EstadÃ­sticas de la Comunidad
        </h3>
        <div className="space-y-2 text-sm">
          <StatItem label="Threads" value="1,204" />
          <StatItem label="Posts" value="15,832" />
          <StatItem label="Miembros" value="342" />
        </div>
      </div>

      {/* CategorÃ­as Populares */}
      <CategoriesNav limit={5} />
    </div>
  )
}

function StatItem({ label, value }: { label: string; value: string }) {
  return (
    <div className="flex justify-between">
      <span className="text-slate-400">{label}</span>
      <span className="font-medium text-slate-100">{value}</span>
    </div>
  )
}
```

---

## Componente Thread Filters

```tsx
// src/components/layout/ThreadFilters.tsx

import { Link, useSearchParams } from 'react-router-dom'

type FilterType = 'all' | 'my' | 'recent' | 'bookmarked'

interface Filter {
  type: FilterType
  label: string
  icon: string
}

const filters: Filter[] = [
  { type: 'all', label: 'Todos los Threads', icon: 'ğŸ“š' },
  { type: 'my', label: 'Mis Threads', icon: 'âœï¸' },
  { type: 'recent', label: 'Recientes', icon: 'ğŸ•' },
  { type: 'bookmarked', label: 'Marcados', icon: 'ğŸ”–' },
]

/**
 * ThreadFilters - Botones de filtro para pÃ¡gina de threads
 * 
 * Usa parÃ¡metros de bÃºsqueda de URL para persistir estado de filtro.
 * Ejemplo: /threads?filter=my
 * 
 * Beneficios de los parÃ¡metros de URL:
 * - Compartibles (enviar enlace con filtro especÃ­fico)
 * - Marcables
 * - Funciona el botÃ³n atrÃ¡s/adelante del navegador
 * - Amigable con SSR
 */
export function ThreadFilters() {
  const [searchParams] = useSearchParams()
  const activeFilter = (searchParams.get('filter') as FilterType) || 'all'

  return (
    <nav className="space-y-1">
      {filters.map((filter) => (
        <FilterButton
          key={filter.type}
          filter={filter}
          isActive={activeFilter === filter.type}
        />
      ))}
    </nav>
  )
}

function FilterButton({ filter, isActive }: { filter: Filter; isActive: boolean }) {
  return (
    <Link
      to={`/threads?filter=${filter.type}`}
      className={`
        flex items-center gap-3 px-3 py-2 rounded-lg transition-colors
        ${
          isActive
            ? 'bg-slate-800 text-slate-100'
            : 'text-slate-400 hover:text-slate-200 hover:bg-slate-800/50'
        }
      `}
    >
      <span className="text-lg">{filter.icon}</span>
      <span className="text-sm font-medium">{filter.label}</span>
    </Link>
  )
}
```

---

## NavegaciÃ³n de CategorÃ­as

```tsx
// src/components/layout/CategoriesNav.tsx

import { Link } from 'react-router-dom'
import { useCategories } from '@/features/categories/hooks/useCategories'

interface CategoriesNavProps {
  limit?: number  // Limitar nÃºmero de categorÃ­as mostradas
}

/**
 * CategoriesNav - Lista de categorÃ­as para navegaciÃ³n de sidebar
 * 
 * Obtiene categorÃ­as de la API y las muestra.
 * Puede limitar la visualizaciÃ³n para sidebar de homepage.
 */
export function CategoriesNav({ limit }: CategoriesNavProps) {
  const { categories, isLoading } = useCategories()

  if (isLoading) {
    return <CategoriesNavSkeleton />
  }

  /**
   * Filtrar a categorÃ­as raÃ­z (sin padre)
   * Limitar si se especifica
   */
  const rootCategories = categories
    .filter((cat) => cat.parentId === null)
    .slice(0, limit)

  return (
    <nav className="space-y-1">
      {rootCategories.map((category) => (
        <CategoryNavItem key={category.id} category={category} />
      ))}

      {limit && categories.length > limit && (
        <Link
          to="/categories"
          className="block px-3 py-2 text-sm text-blue-400 hover:text-blue-300"
        >
          Ver todas las categorÃ­as â†’
        </Link>
      )}
    </nav>
  )
}

function CategoryNavItem({ category }: { category: Category }) {
  return (
    <Link
      to={`/categories/${category.slug}`}
      className="flex items-center gap-3 px-3 py-2 rounded-lg text-slate-400 hover:text-slate-200 hover:bg-slate-800/50 transition-colors"
    >
      {/* Icono con indicador de color */}
      <div className="w-2 h-2 rounded-full bg-blue-500" />
      
      {/* Nombre de categorÃ­a */}
      <span className="text-sm flex-1">{category.name}</span>
      
      {/* Conteo de threads */}
      <span className="text-xs text-slate-500">
        {category.threadCount}
      </span>
    </Link>
  )
}

function CategoriesNavSkeleton() {
  return (
    <div className="space-y-1 animate-pulse">
      {[...Array(5)].map((_, i) => (
        <div key={i} className="h-9 bg-slate-800 rounded-lg" />
      ))}
    </div>
  )
}
```

---

## Sidebar MÃ³vil (Drawer)

En mÃ³vil, la sidebar se convierte en un cajÃ³n deslizante:

```tsx
// src/components/layout/MobileSidebar.tsx

import { useState } from 'react'
import { Sidebar } from './Sidebar'

/**
 * MobileSidebar - CajÃ³n para dispositivos mÃ³viles
 * 
 * Activado por botÃ³n de menÃº hamburguesa.
 * Se desliza desde la izquierda con backdrop.
 */
export function MobileSidebar() {
  const [isOpen, setIsOpen] = useState(false)

  return (
    <>
      {/* BotÃ³n hamburguesa */}
      <button
        onClick={() => setIsOpen(true)}
        className="lg:hidden p-2 text-slate-400 hover:text-slate-200"
        aria-label="Abrir menÃº"
      >
        â˜°
      </button>

      {/* CajÃ³n */}
      {isOpen && (
        <>
          {/* Backdrop */}
          <div
            className="fixed inset-0 bg-black/50 z-40 lg:hidden"
            onClick={() => setIsOpen(false)}
          />

          {/* Panel del cajÃ³n */}
          <div className="fixed top-0 left-0 bottom-0 w-64 bg-slate-900 z-50 lg:hidden overflow-y-auto">
            {/* BotÃ³n cerrar */}
            <div className="flex justify-end p-4">
              <button
                onClick={() => setIsOpen(false)}
                className="p-2 text-slate-400 hover:text-slate-200"
                aria-label="Cerrar menÃº"
              >
                âœ•
              </button>
            </div>

            {/* Contenido de sidebar */}
            <div className="px-4 pb-4">
              <Sidebar />
            </div>
          </div>
        </>
      )}
    </>
  )
}
```

---

## Posicionamiento Sticky

La sidebar usa posicionamiento `sticky` para permanecer visible durante el scroll:

```tsx
<div className="sticky top-20 space-y-6">
  {/* Contenido de sidebar */}
</div>
```

**CÃ³mo funciona sticky:**
- `sticky`: ActÃºa como `relative` hasta el umbral de scroll
- `top-20`: Se pega a 80px (5rem) de la parte superior (debajo de navbar)
- Permanece en su lugar hasta que el padre sale de la vista

**Visual:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navbar (fijo)           â”‚ â† Siempre visible
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Sidebar â”‚ Contenido     â”‚
â”‚ (sticky)â”‚ Principal     â”‚
â”‚    â†“    â”‚    Hace       â”‚
â”‚  Se     â”‚   scroll      â”‚
â”‚ queda   â”‚      â†“        â”‚
â”‚   aquÃ­  â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Estado Persistente con URL

Los filtros usan parÃ¡metros de bÃºsqueda de URL para persistencia:

```tsx
// Leer desde URL
const [searchParams] = useSearchParams()
const filter = searchParams.get('filter') || 'all'

// Escribir en URL
<Link to={`/threads?filter=my`}>Mis Threads</Link>

// ActualizaciÃ³n programÃ¡tica
const [searchParams, setSearchParams] = useSearchParams()
setSearchParams({ filter: 'my' })
```

**Beneficios:**
- **Compartible**: Enviar `/threads?filter=my` a un amigo
- **Marcable**: Guardar vista filtrada
- **BotÃ³n atrÃ¡s funciona**: El historial del navegador rastrea cambios
- **No se necesita localStorage**: La URL es la fuente de verdad

---

## Resumen

### Patrones Clave

1. **UI consciente del contexto**: Contenido diferente por ruta
2. **Posicionamiento sticky**: La sidebar permanece visible
3. **Estado URL**: Los filtros persisten en parÃ¡metros de bÃºsqueda
4. **CajÃ³n mÃ³vil**: MenÃº deslizante en pantallas pequeÃ±as
5. **RevelaciÃ³n progresiva**: Mostrar enlace "ver todo" cuando estÃ¡ limitado

### Mejores PrÃ¡cticas

- âœ… Usa parÃ¡metros de URL para filtros compartibles
- âœ… Posicionamiento sticky para navegaciÃ³n
- âœ… DiseÃ±o responsivo mobile-first
- âœ… Skeletons de carga para mejor UX
- âœ… Limitar items, proporcionar enlace "ver todo"

---

Next: [Footer & Breadcrumbs â†’](/es/react/3.layout/3.footer-breadcrumbs)
