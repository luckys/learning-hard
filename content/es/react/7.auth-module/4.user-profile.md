---
title: User Profile - Gestión de Perfiles y Configuración
description: Domina la gestión de perfiles de usuario, edición de información, avatares, cambios de contraseña, historial de actividad y configuración de cuenta. Construye perfiles completos y personalizables.
---

# Advertencia

:::u-alert
---
title: Los comentarios en el código son solo para fines educativos.
description: En proyectos reales, evita agregar comentarios irrelevantes o redundantes.
color: warning
variant: subtle
icon: i-lucide-triangle-alert
---
:::

El perfil de usuario es el espacio personal de cada miembro. Aquí pueden ver su información, editar detalles, cambiar su avatar, modificar contraseñas, revisar su historial de actividad y ajustar la configuración de su cuenta. Es la central de control del usuario.

---

## Componente de Perfil de Usuario

### Estructura del Componente

```tsx
// src/pages/ProfilePage.tsx

import { useState, useEffect } from 'react'
import { useAuth } from '@/contexts/AuthContext'
import { apiClient } from '@/lib/api-client'
import { z } from 'zod'

const profileSchema = z.object({
  username: z.string().min(3).max(30),
  email: z.string().email(),
  bio: z.string().max(500).optional(),
  website: z.string().url().optional().or(z.literal('')),
  location: z.string().max(100).optional(),
})

type ProfileData = z.infer<typeof profileSchema>

export function ProfilePage() {
  const { user } = useAuth()
  const [profile, setProfile] = useState<ProfileData | null>(null)
  const [isLoading, setIsLoading] = useState(true)
  const [isEditing, setIsEditing] = useState(false)
  const [activeTab, setActiveTab] = useState('overview')

  useEffect(() => {
    fetchProfile()
  }, [])

  const fetchProfile = async () => {
    try {
      const response = await apiClient.get('/users/profile')
      setProfile(response.data)
    } catch (error) {
      console.error('Error al obtener perfil:', error)
    } finally {
      setIsLoading(false)
    }
  }

  if (isLoading) {
    return <ProfileSkeleton />
  }

  return (
    <div className="max-w-6xl mx-auto p-6">
      {/* Header del perfil */}
      <ProfileHeader 
        user={user} 
        profile={profile}
        isEditing={isEditing}
        onEditToggle={() => setIsEditing(!isEditing)}
      />

      {/* Navegación por pestañas */}
      <ProfileTabs 
        activeTab={activeTab}
        onTabChange={setActiveTab}
      />

      {/* Contenido del perfil */}
      <div className="mt-8">
        {activeTab === 'overview' && (
          <OverviewTab profile={profile} />
        )}
        {activeTab === 'activity' && (
          <ActivityTab userId={user?.id} />
        )}
        {activeTab === 'settings' && (
          <SettingsTab />
        )}
      </div>
    </div>
  )
}
```

### Header del Perfil

```tsx
// src/components/profile/ProfileHeader.tsx

import { useState } from 'react'
import { User } from '@/types'
import { AvatarUpload } from './AvatarUpload'

interface ProfileHeaderProps {
  user: User | null
  profile: ProfileData | null
  isEditing: boolean
  onEditToggle: () => void
}

export function ProfileHeader({
  user,
  profile,
  isEditing,
  onEditToggle,
}: ProfileHeaderProps) {
  const [avatarUrl, setAvatarUrl] = useState(profile?.avatarUrl || null)

  return (
    <div className="bg-slate-900 rounded-xl p-8 mb-6">
      <div className="flex items-start gap-6">
        {/* Avatar */}
        <AvatarUpload
          currentAvatar={avatarUrl}
          onAvatarChange={setAvatarUrl}
          disabled={!isEditing}
        />

        {/* Información del usuario */}
        <div className="flex-1">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h1 className="text-3xl font-bold text-slate-100">
                {profile?.username || user?.username}
              </h1>
              <p className="text-slate-400">
                {profile?.email || user?.email}
              </p>
            </div>

            {/* Botón de edición */}
            <button
              onClick={onEditToggle}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
            >
              {isEditing ? 'Cancelar' : 'Editar Perfil'}
            </button>
          </div>

          {/* Detalles adicionales */}
          <div className="space-y-2 text-slate-300">
            {profile?.bio && (
              <p className="text-sm">{profile.bio}</p>
            )}
            
            <div className="flex gap-6 text-sm">
              {profile?.website && (
                <a
                  href={profile.website}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="text-blue-400 hover:text-blue-300"
                >
                  Sitio Web
                </a>
              )}
              
              {profile?.location && (
                <span className="flex items-center gap-1">
                  <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fillRule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clipRule="evenodd" />
                  </svg>
                  {profile.location}
                </span>
              )}
            </div>
          </div>

          {/* Estadísticas */}
          <div className="flex gap-8 mt-6 pt-6 border-t border-slate-800">
            <div>
              <div className="text-2xl font-bold text-slate-100">
                {user?.stats?.threads || 0}
              </div>
              <div className="text-sm text-slate-400">Threads</div>
            </div>
            <div>
              <div className="text-2xl font-bold text-slate-100">
                {user?.stats?.posts || 0}
              </div>
              <div className="text-sm text-slate-400">Posts</div>
            </div>
            <div>
              <div className="text-2xl font-bold text-slate-100">
                {user?.stats?.reputation || 0}
              </div>
              <div className="text-sm text-slate-400">Reputación</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
```

---

## Subida de Avatar

### Componente de Subida de Avatar

```tsx
// src/components/profile/AvatarUpload.tsx

import { useState, useRef } from 'react'
import { apiClient } from '@/lib/api-client'

interface AvatarUploadProps {
  currentAvatar: string | null
  onAvatarChange: (url: string | null) => void
  disabled?: boolean
}

export function AvatarUpload({
  currentAvatar,
  onAvatarChange,
  disabled = false,
}: AvatarUploadProps) {
  const [uploading, setUploading] = useState(false)
  const [preview, setPreview] = useState<string | null>(currentAvatar)
  const fileInputRef = useRef<HTMLInputElement>(null)

  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0]
    if (!file) return

    // Validar tipo de archivo
    if (!file.type.startsWith('image/')) {
      alert('Por favor selecciona una imagen')
      return
    }

    // Validar tamaño (máximo 5MB)
    if (file.size > 5 * 1024 * 1024) {
      alert('La imagen no debe superar los 5MB')
      return
    }

    // Crear preview
    const reader = new FileReader()
    reader.onload = (e) => {
      setPreview(e.target?.result as string)
    }
    reader.readAsDataURL(file)

    // Subir archivo
    await uploadAvatar(file)
  }

  const uploadAvatar = async (file: File) => {
    setUploading(true)
    
    try {
      const formData = new FormData()
      formData.append('avatar', file)

      const response = await apiClient.post('/users/avatar', formData, {
        headers: {
          'Content-Type': 'multipart/form-data',
        },
      })

      onAvatarChange(response.data.avatarUrl)
    } catch (error) {
      console.error('Error al subir avatar:', error)
      // Revertir preview en caso de error
      setPreview(currentAvatar)
    } finally {
      setUploading(false)
    }
  }

  const handleRemoveAvatar = async () => {
    try {
      await apiClient.delete('/users/avatar')
      onAvatarChange(null)
      setPreview(null)
    } catch (error) {
      console.error('Error al eliminar avatar:', error)
    }
  }

  return (
    <div className="relative">
      {/* Avatar actual/preview */}
      <div className="w-32 h-32 rounded-full overflow-hidden bg-slate-800">
        {preview ? (
          <img
            src={preview}
            alt="Avatar"
            className="w-full h-full object-cover"
          />
        ) : (
          <div className="w-full h-full flex items-center justify-center">
            <svg className="w-12 h-12 text-slate-600" fill="currentColor" viewBox="0 0 20 20">
              <path fillRule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clipRule="evenodd" />
            </svg>
          </div>
        )}
      </div>

      {/* Overlay de carga */}
      {uploading && (
        <div className="absolute inset-0 bg-slate-900 bg-opacity-50 rounded-full flex items-center justify-center">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-white" />
        </div>
      )}

      {/* Controles */}
      {!disabled && (
        <div className="absolute bottom-0 right-0 flex gap-2">
          <button
            onClick={() => fileInputRef.current?.click()}
            disabled={uploading}
            className="p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50"
            title="Cambiar avatar"
          >
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </button>

          {preview && (
            <button
              onClick={handleRemoveAvatar}
              disabled={uploading}
              className="p-2 bg-red-600 text-white rounded-full hover:bg-red-700 disabled:opacity-50"
              title="Eliminar avatar"
            >
              <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
              </svg>
            </button>
          )}
        </div>
      )}

      {/* Input de archivo oculto */}
      <input
        ref={fileInputRef}
        type="file"
        accept="image/*"
        onChange={handleFileSelect}
        className="hidden"
      />
    </div>
  )
}
```

---

## Formulario de Edición de Perfil

### Componente de Formulario

```tsx
// src/components/profile/ProfileForm.tsx

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { profileSchema } from '@/lib/validations'
import { apiClient } from '@/lib/api-client'

interface ProfileFormProps {
  profile: ProfileData
  onSave: (data: ProfileData) => void
  onCancel: () => void
}

export function ProfileForm({ profile, onSave, onCancel }: ProfileFormProps) {
  const [isSubmitting, setIsSubmitting] = useState(false)
  
  const {
    register,
    handleSubmit,
    formState: { errors, isDirty },
    reset,
  } = useForm<ProfileData>({
    resolver: zodResolver(profileSchema),
    defaultValues: profile,
  })

  const onSubmit = async (data: ProfileData) => {
    setIsSubmitting(true)
    
    try {
      const response = await apiClient.put('/users/profile', data)
      onSave(response.data)
    } catch (error) {
      console.error('Error al guardar perfil:', error)
    } finally {
      setIsSubmitting(false)
    }
  }

  const handleCancel = () => {
    reset(profile)
    onCancel()
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
      {/* Username */}
      <div>
        <label htmlFor="username" className="block text-sm font-medium text-slate-300 mb-2">
          Nombre de Usuario
        </label>
        <input
          {...register('username')}
          type="text"
          className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="tu-usuario"
        />
        {errors.username && (
          <p className="mt-1 text-sm text-red-400">{errors.username.message}</p>
        )}
      </div>

      {/* Email */}
      <div>
        <label htmlFor="email" className="block text-sm font-medium text-slate-300 mb-2">
          Correo Electrónico
        </label>
        <input
          {...register('email')}
          type="email"
          className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="correo@ejemplo.com"
        />
        {errors.email && (
          <p className="mt-1 text-sm text-red-400">{errors.email.message}</p>
        )}
      </div>

      {/* Bio */}
      <div>
        <label htmlFor="bio" className="block text-sm font-medium text-slate-300 mb-2">
          Biografía
        </label>
        <textarea
          {...register('bio')}
          rows={4}
          className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Cuéntanos sobre ti..."
        />
        <p className="mt-1 text-sm text-slate-500">
          {profile.bio?.length || 0}/500 caracteres
        </p>
        {errors.bio && (
          <p className="mt-1 text-sm text-red-400">{errors.bio.message}</p>
        )}
      </div>

      {/* Website */}
      <div>
        <label htmlFor="website" className="block text-sm font-medium text-slate-300 mb-2">
          Sitio Web
        </label>
        <input
          {...register('website')}
          type="url"
          className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="https://ejemplo.com"
        />
        {errors.website && (
          <p className="mt-1 text-sm text-red-400">{errors.website.message}</p>
        )}
      </div>

      {/* Location */}
      <div>
        <label htmlFor="location" className="block text-sm font-medium text-slate-300 mb-2">
          Ubicación
        </label>
        <input
          {...register('location')}
          type="text"
          className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
          placeholder="Ciudad, País"
        />
        {errors.location && (
          <p className="mt-1 text-sm text-red-400">{errors.location.message}</p>
        )}
      </div>

      {/* Botones de acción */}
      <div className="flex gap-4 pt-6 border-t border-slate-800">
        <button
          type="submit"
          disabled={isSubmitting || !isDirty}
          className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {isSubmitting ? 'Guardando...' : 'Guardar Cambios'}
        </button>
        
        <button
          type="button"
          onClick={handleCancel}
          className="px-6 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600"
        >
          Cancelar
        </button>
      </div>
    </form>
  )
}
```

---

## Cambio de Contraseña

### Formulario de Cambio de Contraseña

```tsx
// src/components/profile/PasswordChangeForm.tsx

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { apiClient } from '@/lib/api-client'

const passwordChangeSchema = z.object({
  currentPassword: z.string().min(1, 'La contraseña actual es requerida'),
  newPassword: z.string()
    .min(8, 'La contraseña debe tener al menos 8 caracteres')
    .regex(/[A-Z]/, 'Debe contener al menos una mayúscula')
    .regex(/[a-z]/, 'Debe contener al menos una minúscula')
    .regex(/[0-9]/, 'Debe contener al menos un número'),
  confirmPassword: z.string(),
}).refine((data) => data.newPassword === data.confirmPassword, {
  message: 'Las contraseñas no coinciden',
  path: ['confirmPassword'],
})

type PasswordChangeData = z.infer<typeof passwordChangeSchema>

export function PasswordChangeForm() {
  const [isSubmitting, setIsSubmitting] = useState(false)
  const [success, setSuccess] = useState(false)
  
  const {
    register,
    handleSubmit,
    formState: { errors },
    reset,
  } = useForm<PasswordChangeData>({
    resolver: zodResolver(passwordChangeSchema),
  })

  const onSubmit = async (data: PasswordChangeData) => {
    setIsSubmitting(true)
    
    try {
      await apiClient.post('/users/change-password', {
        currentPassword: data.currentPassword,
        newPassword: data.newPassword,
      })
      
      setSuccess(true)
      reset()
      
      // Ocultar mensaje de éxito después de 3 segundos
      setTimeout(() => setSuccess(false), 3000)
    } catch (error) {
      console.error('Error al cambiar contraseña:', error)
    } finally {
      setIsSubmitting(false)
    }
  }

  return (
    <div className="bg-slate-900 rounded-xl p-6">
      <h3 className="text-xl font-semibold text-slate-100 mb-6">
        Cambiar Contraseña
      </h3>

      {success && (
        <div className="mb-6 p-4 bg-green-900 bg-opacity-50 border border-green-700 rounded-lg text-green-300">
          ¡Contraseña cambiada exitosamente!
        </div>
      )}

      <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
        {/* Contraseña actual */}
        <div>
          <label htmlFor="currentPassword" className="block text-sm font-medium text-slate-300 mb-2">
            Contraseña Actual
          </label>
          <input
            {...register('currentPassword')}
            type="password"
            className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Ingresa tu contraseña actual"
          />
          {errors.currentPassword && (
            <p className="mt-1 text-sm text-red-400">{errors.currentPassword.message}</p>
          )}
        </div>

        {/* Nueva contraseña */}
        <div>
          <label htmlFor="newPassword" className="block text-sm font-medium text-slate-300 mb-2">
            Nueva Contraseña
          </label>
          <input
            {...register('newPassword')}
            type="password"
            className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Ingresa tu nueva contraseña"
          />
          {errors.newPassword && (
            <p className="mt-1 text-sm text-red-400">{errors.newPassword.message}</p>
          )}
        </div>

        {/* Confirmar contraseña */}
        <div>
          <label htmlFor="confirmPassword" className="block text-sm font-medium text-slate-300 mb-2">
            Confirmar Nueva Contraseña
          </label>
          <input
            {...register('confirmPassword')}
            type="password"
            className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500"
            placeholder="Confirma tu nueva contraseña"
          />
          {errors.confirmPassword && (
            <p className="mt-1 text-sm text-red-400">{errors.confirmPassword.message}</p>
          )}
        </div>

        {/* Botón de envío */}
        <button
          type="submit"
          disabled={isSubmitting}
          className="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {isSubmitting ? 'Cambiando...' : 'Cambiar Contraseña'}
        </button>
      </form>
    </div>
  )
}
```

---

## Historial de Actividad

### Componente de Historial

```tsx
// src/components/profile/ActivityTab.tsx

import { useState, useEffect } from 'react'
import { apiClient } from '@/lib/api-client'

interface ActivityItem {
  id: string
  type: 'thread_created' | 'post_created' | 'thread_updated' | 'post_updated'
  title: string
  content?: string
  createdAt: string
  metadata?: {
    threadId?: string
    postId?: string
    categoryId?: string
  }
}

interface ActivityTabProps {
  userId: string
}

export function ActivityTab({ userId }: ActivityTabProps) {
  const [activities, setActivities] = useState<ActivityItem[]>([])
  const [loading, setLoading] = useState(true)
  const [filter, setFilter] = useState<string>('all')

  useEffect(() => {
    fetchActivities()
  }, [userId, filter])

  const fetchActivities = async () => {
    setLoading(true)
    
    try {
      const response = await apiClient.get(`/users/${userId}/activity`, {
        params: { filter },
      })
      setActivities(response.data)
    } catch (error) {
      console.error('Error al obtener actividad:', error)
    } finally {
      setLoading(false)
    }
  }

  const getActivityIcon = (type: ActivityItem['type']) => {
    switch (type) {
      case 'thread_created':
        return (
          <svg className="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
            <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clipRule="evenodd" />
          </svg>
        )
      case 'post_created':
        return (
          <svg className="w-5 h-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
            <path fillRule="evenodd" d="M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z" clipRule="evenodd" />
          </svg>
        )
      case 'thread_updated':
      case 'post_updated':
        return (
          <svg className="w-5 h-5 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
            <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
          </svg>
        )
      default:
        return null
    }
  }

  const getActivityText = (activity: ActivityItem) => {
    switch (activity.type) {
      case 'thread_created':
        return 'Creó un nuevo thread'
      case 'post_created':
        return 'Respondió a un thread'
      case 'thread_updated':
        return 'Editó un thread'
      case 'post_updated':
        return 'Editó una respuesta'
      default:
        return 'Realizó una acción'
    }
  }

  const formatDate = (dateString: string) => {
    const date = new Date(dateString)
    const now = new Date()
    const diff = now.getTime() - date.getTime()
    const hours = Math.floor(diff / (1000 * 60 * 60))
    
    if (hours < 1) return 'Hace menos de una hora'
    if (hours < 24) return `Hace ${hours} horas`
    if (hours < 48) return 'Ayer'
    return date.toLocaleDateString('es-ES')
  }

  if (loading) {
    return <ActivitySkeleton />
  }

  return (
    <div className="space-y-6">
      {/* Filtros */}
      <div className="flex gap-2">
        {['all', 'threads', 'posts'].map((filterType) => (
          <button
            key={filterType}
            onClick={() => setFilter(filterType)}
            className={`px-4 py-2 rounded-lg transition-colors ${
              filter === filterType
                ? 'bg-blue-600 text-white'
                : 'bg-slate-800 text-slate-300 hover:bg-slate-700'
            }`}
          >
            {filterType === 'all' && 'Todo'}
            {filterType === 'threads' && 'Threads'}
            {filterType === 'posts' && 'Posts'}
          </button>
        ))}
      </div>

      {/* Lista de actividades */}
      <div className="space-y-4">
        {activities.length === 0 ? (
          <div className="text-center py-12 text-slate-500">
            No hay actividad reciente
          </div>
        ) : (
          activities.map((activity) => (
            <div
              key={activity.id}
              className="bg-slate-900 rounded-lg p-4 flex items-start gap-4"
            >
              <div className="mt-1">
                {getActivityIcon(activity.type)}
              </div>
              
              <div className="flex-1">
                <div className="flex items-center justify-between mb-2">
                  <span className="text-slate-300">
                    {getActivityText(activity)}
                  </span>
                  <span className="text-sm text-slate-500">
                    {formatDate(activity.createdAt)}
                  </span>
                </div>
                
                <h4 className="font-medium text-slate-100 mb-1">
                  {activity.title}
                </h4>
                
                {activity.content && (
                  <p className="text-sm text-slate-400 line-clamp-2">
                    {activity.content}
                  </p>
                )}
                
                {/* Enlaces */}
                {activity.metadata?.threadId && (
                  <a
                    href={`/threads/${activity.metadata.threadId}`}
                    className="text-sm text-blue-400 hover:text-blue-300 mt-2 inline-block"
                  >
                    Ver thread →
                  </a>
                )}
              </div>
            </div>
          ))
        )}
      </div>
    </div>
  )
}
```

---

## Configuración de Cuenta

### Componente de Configuración

```tsx
// src/components/profile/SettingsTab.tsx

import { useState } from 'react'
import { useAuth } from '@/contexts/AuthContext'
import { apiClient } from '@/lib/api-client'

export function SettingsTab() {
  const { user, signOut } = useAuth()
  const [isDeleting, setIsDeleting] = useState(false)
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false)

  const handleDeleteAccount = async () => {
    setIsDeleting(true)
    
    try {
      await apiClient.delete('/users/account')
      signOut()
    } catch (error) {
      console.error('Error al eliminar cuenta:', error)
    } finally {
      setIsDeleting(false)
      setShowDeleteConfirm(false)
    }
  }

  return (
    <div className="space-y-6">
      {/* Notificaciones */}
      <div className="bg-slate-900 rounded-xl p-6">
        <h3 className="text-xl font-semibold text-slate-100 mb-6">
          Notificaciones
        </h3>
        
        <div className="space-y-4">
          <label className="flex items-center justify-between">
            <div>
              <div className="text-slate-100">Notificaciones por email</div>
              <div className="text-sm text-slate-400">
                Recibir notificaciones cuando alguien responda a tus threads
              </div>
            </div>
            <input
              type="checkbox"
              defaultChecked={user?.emailNotifications}
              className="w-5 h-5 text-blue-600 bg-slate-800 border-slate-600 rounded focus:ring-blue-500"
            />
          </label>
          
          <label className="flex items-center justify-between">
            <div>
              <div className="text-slate-100">Notificaciones de navegador</div>
              <div className="text-sm text-slate-400">
                Recibir notificaciones push en tu navegador
              </div>
            </div>
            <input
              type="checkbox"
              defaultChecked={user?.pushNotifications}
              className="w-5 h-5 text-blue-600 bg-slate-800 border-slate-600 rounded focus:ring-blue-500"
            />
          </label>
        </div>
      </div>

      {/* Privacidad */}
      <div className="bg-slate-900 rounded-xl p-6">
        <h3 className="text-xl font-semibold text-slate-100 mb-6">
          Privacidad
        </h3>
        
        <div className="space-y-4">
          <label className="flex items-center justify-between">
            <div>
              <div className="text-slate-100">Perfil público</div>
              <div className="text-sm text-slate-400">
                Permitir que otros usuarios vean tu perfil
              </div>
            </div>
            <input
              type="checkbox"
              defaultChecked={user?.publicProfile}
              className="w-5 h-5 text-blue-600 bg-slate-800 border-slate-600 rounded focus:ring-blue-500"
            />
          </label>
          
          <label className="flex items-center justify-between">
            <div>
              <div className="text-slate-100">Mostrar actividad</div>
              <div className="text-sm text-slate-400">
                Permitir que otros vean tu historial de actividad
              </div>
            </div>
            <input
              type="checkbox"
              defaultChecked={user?.showActivity}
              className="w-5 h-5 text-blue-600 bg-slate-800 border-slate-600 rounded focus:ring-blue-500"
            />
          </label>
        </div>
      </div>

      {/* Zona de peligro */}
      <div className="bg-red-900 bg-opacity-20 border border-red-800 rounded-xl p-6">
        <h3 className="text-xl font-semibold text-red-400 mb-6">
          Zona de Peligro
        </h3>
        
        <div className="space-y-4">
          <div>
            <button
              onClick={() => setShowDeleteConfirm(true)}
              className="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"
            >
              Eliminar Cuenta
            </button>
            <p className="text-sm text-slate-400 mt-2">
              Esta acción es irreversible y eliminará permanentemente tu cuenta y todos tus datos.
            </p>
          </div>
        </div>
      </div>

      {/* Modal de confirmación de eliminación */}
      {showDeleteConfirm && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-slate-900 rounded-xl p-6 max-w-md w-full mx-4">
            <h3 className="text-xl font-semibold text-slate-100 mb-4">
              ¿Eliminar cuenta permanentemente?
            </h3>
            
            <p className="text-slate-400 mb-6">
              Esta acción no se puede deshacer. Todos tus threads, posts y datos personales serán eliminados permanentemente.
            </p>
            
            <div className="flex gap-4">
              <button
                onClick={handleDeleteAccount}
                disabled={isDeleting}
                className="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50"
              >
                {isDeleting ? 'Eliminando...' : 'Sí, eliminar cuenta'}
              </button>
              
              <button
                onClick={() => setShowDeleteConfirm(false)}
                className="flex-1 px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600"
              >
                Cancelar
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}
```

---

## Resumen

### Conceptos Clave

1. **Gestión de Perfiles**: Mostrar y editar información del usuario
2. **Subida de Avatar**: Manejo de archivos con preview y validación
3. **Formularios de Perfil**: Validación con Zod y React Hook Form
4. **Cambio de Contraseña**: Flujo seguro de actualización de contraseña
5. **Historial de Actividad**: Seguimiento de acciones del usuario
6. **Configuración de Cuenta**: Preferencias y configuración de privacidad

### Mejores Prácticas

- ✅ Validar siempre en el cliente y servidor
- ✅ Mostrar estados de carga durante operaciones
- ✅ Proporcionar feedback claro al usuario
- ✅ Implementar confirmación para acciones destructivas
- ✅ Manejar errores gracefully
- ✅ Optimizar imágenes de avatar
- ✅ Paginar historial de actividad

---

Siguiente: [Password Reset →](/es/react/7.auth-module/5.password-reset)
