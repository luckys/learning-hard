---
title: Deployment - Build de ProducciÃ³n & Hosting (Vercel, Cloudflare, AWS)
description: Domina el despliegue a producciÃ³n: optimizaciÃ³n de build, configuraciÃ³n de entornos y hosting en Vercel, Cloudflare Pages, AWS S3+CloudFront y Docker.
---

# Disclaimer

:::u-alert
---
title: Los comentarios en el cÃ³digo son solo educativos.
description: En proyectos reales, evita comentarios irrelevantes o redundantes.
color: warning
variant: subtle
icon: i-lucide-triangle-alert
---
:::

El deployment es el momento en que tu foro **llega a producciÃ³n**. ProducciÃ³n es distinta de desarrollo: necesitamos **optimizaciÃ³n, seguridad, monitorizaciÃ³n y fiabilidad**.

---

## Build de producciÃ³n: optimizaciÃ³n

```bash
# Build optimizado para producciÃ³n
npm run build

# Output: carpeta dist/ con:
# - JavaScript minificado (gzip ~50KB)
# - Dependencias tree-shaken
# - Code splitting (lazy chunks)
# - CSS optimizado
# - Nombres de archivo hasheados (cache busting)

# Analizar tamaÃ±o del bundle
npm run build -- --analyze
```

Durante el build ocurren varias cosas:

1. **Minification**: se reduce el tamaÃ±o del cÃ³digo.
2. **Tree-shaking**: se elimina cÃ³digo no usado.
3. **Code splitting**: se divide en chunks cargados bajo demanda.
4. **OptimizaciÃ³n de CSS**: se quitan estilos no utilizados.
5. **Asset hashing**: se aÃ±aden hashes a los nombres de archivos para cache busting.

---

## Environment Variables: gestiÃ³n de secrets

```env
# .env.development
VITE_API_URL=http://localhost:3001/api
VITE_WS_URL=ws://localhost:3001

# .env.production
VITE_API_URL=https://api.yourforum.com
VITE_WS_URL=wss://api.yourforum.com

# .env.production.local (NUNCA lo hagas commit)
VITE_SENTRY_DSN=https://...@sentry.io/...
VITE_ANALYTICS_KEY=...
```

**Buenas prÃ¡cticas:**

- Prefija con `VITE_` las variables que necesita el cliente.
- Usa `.env.local` / `.env.production.local` para secrets (aÃ±adidos a `.gitignore`).
- Configura secrets desde tu **CI/CD** (GitHub Actions, etc.).
- Rota los secrets con regularidad.
- Nunca hagas commit de `.env.local`.
- Nunca expongas **API keys** directamente en el cÃ³digo del cliente.

---

## Plataformas de despliegue

### 1. Vercel (recomendado para React)

**Pros:**

- Optimizado para apps React/Next.js.
- Deploy automÃ¡tico desde Git.
- CDN incorporado.
- Edge Functions.
- Free tier generoso.

**Setup:**

```bash
# Instalar Vercel CLI
npm install -g vercel

# Deploy
vercel

# Deploy a producciÃ³n
vercel --prod
```

**ConfiguraciÃ³n vercel.json:**

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "env": {
    "VITE_API_URL": "@api_url",
    "VITE_WS_URL": "@ws_url"
  },
  "redirects": [
    {
      "source": "/old-path",
      "destination": "/new-path",
      "permanent": true
    }
  ],
  "headers": [
    {
      "source": "/api/:path*",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=3600"
        }
      ]
    }
  ]
}
```

### 2. Cloudflare Pages

**Pros:**

- CDN global muy rÃ¡pido.
- Free tier con ancho de banda ilimitado.
- Workers para funciones serverless.
- ProtecciÃ³n DDoS incluida.

**Setup:**

```bash
# Instalar Wrangler CLI
npm install -g wrangler

# Deploy
wrangler pages deploy dist
```

**ConfiguraciÃ³n wrangler.toml:**

```toml
name = "forum"
main = "src/index.ts"
compatibility_date = "2024-01-15"

[env.production]
vars = { VITE_API_URL = "https://api.yourforum.com" }

[[routes]]
pattern = "/api/*"
zone_name = "yourforum.com"
```

### 3. AWS S3 + CloudFront

**Pros:**

- Altamente escalable.
- Pago por uso.
- Control total de la infraestructura.
- CDN global.

**Setup:**

```bash
# Build
npm run build

# Subir a S3
aws s3 sync dist/ s3://yourforum-bucket/ --delete

# Invalidar cachÃ© de CloudFront
aws cloudfront create-invalidation \
  --distribution-id E123ABC \
  --paths "/*"
```

**Plantilla CloudFormation (Infrastructure as Code):**

```yaml
Resources:
  S3Bucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: yourforum-bucket
      VersioningConfiguration:
        Status: Enabled
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        BlockPublicPolicy: true
        IgnorePublicAcls: true
        RestrictPublicBuckets: true

  CloudFrontDistribution:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        DefaultCacheBehavior:
          ViewerProtocolPolicy: redirect-to-https
          CachePolicyId: 658327ea-f89d-4fab-a63d-7e88639e58f6
          OriginRequestPolicyId: 216adef5-5c7f-47e4-b989-5492eafa07d3
        Origins:
          - DomainName: yourforum-bucket.s3.amazonaws.com
            Id: S3Origin
            S3OriginConfig: {}
        Enabled: true
        DefaultRootObject: index.html
```

### 4. Docker + Container Registry

**Pros:**

- Corre en cualquier lado donde haya Docker.
- Entornos reproducibles.
- Escalado sencillo.

**Dockerfile:**

```dockerfile
# Build stage
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build

# Production stage
FROM node:18-alpine

WORKDIR /app

# Install serve to run SPA
RUN npm install -g serve

# Copy built app from builder
COPY --from=builder /app/dist ./dist

EXPOSE 3000

# Health check
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD node -e "require('http').get('http://localhost:3000', (r) => {if (r.statusCode !== 200) throw new Error(r.statusCode)})"

CMD ["serve", "-s", "dist", "-l", "3000"]
```

**Deploy a Docker Hub:**

```bash
# Build
docker build -t yourforum:latest .

# Tag
docker tag yourforum:latest yourusername/yourforum:latest

# Push
docker push yourusername/yourforum:latest

# Run local
docker run -p 3000:3000 yourusername/yourforum:latest
```

---

## Monitoring & Error Tracking

```ts
// src/lib/sentry.ts

import * as Sentry from "@sentry/react"

Sentry.init({
  dsn: import.meta.env.VITE_SENTRY_DSN,
  environment: import.meta.env.MODE,
  tracesSampleRate: 1.0,
  integrations: [
    new Sentry.Replay({
      maskAllText: true,
      blockAllMedia: true,
    }),
  ],
})

// Wrap app
export const SentryRoutes = Sentry.withSentryRouting(Routes)
```

---

## Pre-Deployment Checklist

Antes de desplegar a producciÃ³n, revisa:

- âœ… Todos los tests pasando (`npm run test`).
- âœ… Sin errores/warnings en consola.
- âœ… Bundle size analizado (`npm run build -- --analyze`).
- âœ… Variables de entorno configuradas.
- âœ… Endpoints de API probados.
- âœ… Certificado SSL activo.
- âœ… CORS configurado correctamente.
- âœ… MonitorizaciÃ³n de errores (Sentry) activa.
- âœ… Analytics configurado.
- âœ… Estrategia de backup definida.
- âœ… Plan de rollback documentado.

---

## Post-Deployment Monitoring

```ts
// Monitor performance
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals'

getCLS(metric => console.log('CLS:', metric.value))
getFID(metric => console.log('FID:', metric.value))
getFCP(metric => console.log('FCP:', metric.value))
getLCP(metric => console.log('LCP:', metric.value))
getTTFB(metric => console.log('TTFB:', metric.value))

// Good targets:
// LCP: < 2.5s
// FID: < 100ms
// CLS: < 0.1
```

---

## Deployment Comparison

| Platform | Cost | Setup | Performance | Best For |
|----------|------|-------|-------------|----------|
| **Vercel** | Free + paid | 5 min | Excellent | React/Next.js |
| **Cloudflare** | Free + paid | 5 min | Excellent | Global reach |
| **AWS** | Pay-as-you-go | 30 min | Excellent | Enterprise |
| **Docker** | Self-hosted | 15 min | Depends | Full control |

---

## ðŸŽ‰ Â¡Felicidades!

Â¡Has completado la documentaciÃ³n del foro en React!

Ahora dominas:

- Fundamentos de React (components, state, effects, hooks).
- Patrones avanzados (Context, Custom Hooks, Portals).
- Formularios y validaciÃ³n (React Hook Form, Zod).
- Routing y navegaciÃ³n (React Router).
- Authentication y authorization.
- Error handling y resiliencia.
- Performance optimization.
- Testing strategies (unit, integration).
- Deployment a producciÃ³n.

**Has construido un foro completo en React, listo para producciÃ³n, desde cero.**

---

## Next Steps

1. **Construir tu propio foro** con funcionalidades Ãºnicas.
2. **Contribuir a open source** en proyectos React.
3. **Aprender frameworks de React** (Next.js, Remix).
4. **Dominar state management** (Zustand, Redux).
5. **Explorar React Native** para mÃ³vil.
6. **Profundizar en backend** (Node.js, bases de datos).
7. **Mejorar en DevOps** (CI/CD, monitorizaciÃ³n, scaling).

Keep building! ðŸš€
