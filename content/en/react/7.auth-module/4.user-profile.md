---
title: User Profile - Complete Account Management
description: Master user profiles with edit functionality, avatar uploads, activity history, settings management, and privacy controls. Build production-ready profile pages.
---

# Disclaimer

:::u-alert
---
title: Comments in the code are for educational purposes only.
description: In real projects, avoid adding irrelevant or redundant comments.
color: warning
variant: subtle
icon: i-lucide-triangle-alert
---
:::

User profiles are the heart of community engagement. They show who users are, what they've contributed, and allow them to manage their account. A great profile page combines display, editing, activity tracking, and privacy controls.

---

## Display Profile Page

```tsx
// src/pages/ProfilePage.tsx

import { useParams } from 'react-router-dom'
import { useState, useEffect } from 'react'
import { apiClient } from '@/lib/api-client'
import { useAuth } from '@/contexts/AuthContext'

export function ProfilePage() {
  const { username } = useParams()
  const { user: currentUser } = useAuth()
  const [profile, setProfile] = useState(null)
  const [isLoading, setIsLoading] = useState(true)

  useEffect(() => {
    fetchProfile()
  }, [username])

  const fetchProfile = async () => {
    try {
      const response = await apiClient.get(`/users/${username}`)
      setProfile(response.data)
    } catch (error) {
      // Handle user not found
    } finally {
      setIsLoading(false)
    }
  }

  if (isLoading) return <div>Loading...</div>
  if (!profile) return <div>User not found</div>

  const isOwnProfile = currentUser?.username === username

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="flex items-start gap-6">
        <img
          src={profile.avatarUrl || '/avatars/default.png'}
          alt={profile.username}
          className="w-24 h-24 rounded-full"
        />

        <div className="flex-1">
          <h1 className="text-3xl font-bold">{profile.displayName}</h1>
          <p className="text-slate-400">@{profile.username}</p>

          {isOwnProfile && (
            <Link to="/settings" className="mt-4 px-4 py-2 bg-slate-800 rounded-lg">
              Edit Profile
            </Link>
          )}
        </div>
      </div>

      <div className="mt-8 grid grid-cols-3 gap-4">
        <div className="p-4 bg-slate-900 rounded-lg">
          <p className="text-sm text-slate-400">Threads</p>
          <p className="text-2xl font-bold">{profile.threadCount}</p>
        </div>
        <div className="p-4 bg-slate-900 rounded-lg">
          <p className="text-sm text-slate-400">Posts</p>
          <p className="text-2xl font-bold">{profile.postCount}</p>
        </div>
        <div className="p-4 bg-slate-900 rounded-lg">
          <p className="text-sm text-slate-400">Reputation</p>
          <p className="text-2xl font-bold">{profile.reputation}</p>
        </div>
      </div>
    </div>
  )
}
```

---

## Edit Profile

### Profile Edit Form

```tsx
// src/pages/EditProfilePage.tsx

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { useAuth } from '@/contexts/AuthContext'
import { apiClient } from '@/lib/api-client'
import { useNavigate } from 'react-router-dom'

const profileSchema = z.object({
  displayName: z.string().min(2, 'Display name must be at least 2 characters').max(50),
  bio: z.string().max(500, 'Bio must be less than 500 characters').optional(),
  location: z.string().max(100).optional(),
  website: z.string().url('Must be a valid URL').optional().or(z.literal('')),
})

type ProfileInput = z.infer<typeof profileSchema>

export function EditProfilePage() {
  const { user, updateUser } = useAuth()
  const navigate = useNavigate()
  const [isSubmitting, setIsSubmitting] = useState(false)

  const { register, handleSubmit, formState: { errors } } = useForm<ProfileInput>({
    resolver: zodResolver(profileSchema),
    defaultValues: {
      displayName: user?.displayName || '',
      bio: user?.bio || '',
      location: user?.location || '',
      website: user?.website || '',
    },
  })

  const onSubmit = async (data: ProfileInput) => {
    setIsSubmitting(true)
    try {
      const response = await apiClient.patch('/users/me', data)
      updateUser(response.data)
      navigate(`/users/${user?.username}`)
    } catch (error) {
      console.error('Failed to update profile:', error)
    } finally {
      setIsSubmitting(false)
    }
  }

  return (
    <div className="container mx-auto px-4 py-8 max-w-2xl">
      <h1 className="text-3xl font-bold mb-8">Edit Profile</h1>

      <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
        <div>
          <label className="block text-sm font-medium mb-2">Display Name</label>
          <input
            {...register('displayName')}
            className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
          />
          {errors.displayName && (
            <p className="text-red-400 text-sm mt-1">{errors.displayName.message}</p>
          )}
        </div>

        <div>
          <label className="block text-sm font-medium mb-2">Bio</label>
          <textarea
            {...register('bio')}
            rows={4}
            className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
            placeholder="Tell us about yourself..."
          />
          {errors.bio && (
            <p className="text-red-400 text-sm mt-1">{errors.bio.message}</p>
          )}
        </div>

        <div>
          <label className="block text-sm font-medium mb-2">Location</label>
          <input
            {...register('location')}
            className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
            placeholder="City, Country"
          />
        </div>

        <div>
          <label className="block text-sm font-medium mb-2">Website</label>
          <input
            {...register('website')}
            type="url"
            className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
            placeholder="https://example.com"
          />
          {errors.website && (
            <p className="text-red-400 text-sm mt-1">{errors.website.message}</p>
          )}
        </div>

        <div className="flex gap-4">
          <button
            type="submit"
            disabled={isSubmitting}
            className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
          >
            {isSubmitting ? 'Saving...' : 'Save Changes'}
          </button>
          <button
            type="button"
            onClick={() => navigate(-1)}
            className="px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  )
}
```

---

## Avatar Upload

### Avatar Upload Component

```tsx
// src/components/profile/AvatarUpload.tsx

import { useState, useRef } from 'react'
import { apiClient } from '@/lib/api-client'

interface AvatarUploadProps {
  currentAvatar: string | null
  onUploadSuccess: (newAvatarUrl: string) => void
}

export function AvatarUpload({ currentAvatar, onUploadSuccess }: AvatarUploadProps) {
  const [preview, setPreview] = useState<string | null>(null)
  const [isUploading, setIsUploading] = useState(false)
  const fileInputRef = useRef<HTMLInputElement>(null)

  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {
    const file = event.target.files?.[0]
    if (!file) return

    // Validate file type
    if (!file.type.startsWith('image/')) {
      alert('Please select an image file')
      return
    }

    // Validate file size (max 5MB)
    if (file.size > 5 * 1024 * 1024) {
      alert('Image must be less than 5MB')
      return
    }

    // Create preview
    const reader = new FileReader()
    reader.onloadend = () => {
      setPreview(reader.result as string)
    }
    reader.readAsDataURL(file)
  }

  const handleUpload = async () => {
    const file = fileInputRef.current?.files?.[0]
    if (!file) return

    setIsUploading(true)
    try {
      const formData = new FormData()
      formData.append('avatar', file)

      const response = await apiClient.post('/users/me/avatar', formData, {
        headers: {
          'Content-Type': 'multipart/form-data',
        },
      })

      onUploadSuccess(response.data.avatarUrl)
      setPreview(null)
    } catch (error) {
      console.error('Failed to upload avatar:', error)
      alert('Failed to upload avatar')
    } finally {
      setIsUploading(false)
    }
  }

  return (
    <div className="space-y-4">
      <div className="flex items-center gap-6">
        <img
          src={preview || currentAvatar || '/avatars/default.png'}
          alt="Avatar"
          className="w-24 h-24 rounded-full object-cover"
        />

        <div>
          <input
            ref={fileInputRef}
            type="file"
            accept="image/*"
            onChange={handleFileSelect}
            className="hidden"
          />
          <button
            onClick={() => fileInputRef.current?.click()}
            className="px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600"
          >
            Choose Image
          </button>
          <p className="text-sm text-slate-400 mt-2">
            JPG, PNG or GIF. Max 5MB.
          </p>
        </div>
      </div>

      {preview && (
        <div className="flex gap-2">
          <button
            onClick={handleUpload}
            disabled={isUploading}
            className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
          >
            {isUploading ? 'Uploading...' : 'Upload'}
          </button>
          <button
            onClick={() => setPreview(null)}
            className="px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600"
          >
            Cancel
          </button>
        </div>
      )}
    </div>
  )
}
```

---

## Password Change

```tsx
// src/components/profile/ChangePassword.tsx

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { apiClient } from '@/lib/api-client'

const passwordSchema = z.object({
  currentPassword: z.string().min(1, 'Current password is required'),
  newPassword: z.string()
    .min(8, 'Password must be at least 8 characters')
    .regex(/[A-Z]/, 'Must contain uppercase letter')
    .regex(/[0-9]/, 'Must contain number')
    .regex(/[!@#$%^&*]/, 'Must contain special character'),
  confirmPassword: z.string(),
}).refine((data) => data.newPassword === data.confirmPassword, {
  message: "Passwords don't match",
  path: ['confirmPassword'],
})

type PasswordInput = z.infer<typeof passwordSchema>

export function ChangePassword() {
  const [success, setSuccess] = useState(false)
  const { register, handleSubmit, formState: { errors }, reset } = useForm<PasswordInput>({
    resolver: zodResolver(passwordSchema),
  })

  const onSubmit = async (data: PasswordInput) => {
    try {
      await apiClient.post('/users/me/password', {
        currentPassword: data.currentPassword,
        newPassword: data.newPassword,
      })
      setSuccess(true)
      reset()
      setTimeout(() => setSuccess(false), 3000)
    } catch (error) {
      console.error('Failed to change password:', error)
    }
  }

  return (
    <div className="max-w-md">
      <h2 className="text-2xl font-bold mb-6">Change Password</h2>

      {success && (
        <div className="mb-4 p-4 bg-green-900/20 border border-green-700 rounded-lg text-green-400">
          Password changed successfully!
        </div>
      )}

      <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
        <div>
          <label className="block text-sm font-medium mb-2">Current Password</label>
          <input
            type="password"
            {...register('currentPassword')}
            className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
          />
          {errors.currentPassword && (
            <p className="text-red-400 text-sm mt-1">{errors.currentPassword.message}</p>
          )}
        </div>

        <div>
          <label className="block text-sm font-medium mb-2">New Password</label>
          <input
            type="password"
            {...register('newPassword')}
            className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
          />
          {errors.newPassword && (
            <p className="text-red-400 text-sm mt-1">{errors.newPassword.message}</p>
          )}
        </div>

        <div>
          <label className="block text-sm font-medium mb-2">Confirm New Password</label>
          <input
            type="password"
            {...register('confirmPassword')}
            className="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg"
          />
          {errors.confirmPassword && (
            <p className="text-red-400 text-sm mt-1">{errors.confirmPassword.message}</p>
          )}
        </div>

        <button
          type="submit"
          className="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
        >
          Change Password
        </button>
      </form>
    </div>
  )
}
```

---

## Activity History

```tsx
// src/components/profile/ActivityHistory.tsx

import { useState, useEffect } from 'react'
import { apiClient } from '@/lib/api-client'
import { Link } from 'react-router-dom'
import { formatDistanceToNow } from 'date-fns'

interface Activity {
  id: string
  type: 'thread_created' | 'post_created' | 'thread_liked' | 'post_liked'
  createdAt: string
  thread?: {
    id: string
    title: string
  }
  post?: {
    id: string
    content: string
  }
}

export function ActivityHistory({ username }: { username: string }) {
  const [activities, setActivities] = useState<Activity[]>([])
  const [isLoading, setIsLoading] = useState(true)

  useEffect(() => {
    fetchActivities()
  }, [username])

  const fetchActivities = async () => {
    try {
      const response = await apiClient.get(`/users/${username}/activity`)
      setActivities(response.data)
    } catch (error) {
      console.error('Failed to fetch activities:', error)
    } finally {
      setIsLoading(false)
    }
  }

  if (isLoading) {
    return <div>Loading activity...</div>
  }

  return (
    <div className="space-y-4">
      <h2 className="text-2xl font-bold">Recent Activity</h2>

      {activities.length === 0 ? (
        <p className="text-slate-400">No recent activity</p>
      ) : (
        <div className="space-y-3">
          {activities.map((activity) => (
            <div
              key={activity.id}
              className="p-4 bg-slate-900 border border-slate-800 rounded-lg"
            >
              <div className="flex items-start justify-between">
                <div className="flex-1">
                  {activity.type === 'thread_created' && (
                    <>
                      <p className="text-slate-300">
                        Created thread{' '}
                        <Link
                          to={`/threads/${activity.thread?.id}`}
                          className="text-blue-400 hover:underline"
                        >
                          {activity.thread?.title}
                        </Link>
                      </p>
                    </>
                  )}
                  {activity.type === 'post_created' && (
                    <>
                      <p className="text-slate-300">Posted a reply</p>
                      <p className="text-sm text-slate-400 mt-1">
                        {activity.post?.content.slice(0, 100)}...
                      </p>
                    </>
                  )}
                </div>
                <span className="text-sm text-slate-500">
                  {formatDistanceToNow(new Date(activity.createdAt), { addSuffix: true })}
                </span>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  )
}
```

---

## User Settings

```tsx
// src/pages/SettingsPage.tsx

import { useState } from 'react'
import { useAuth } from '@/contexts/AuthContext'
import { AvatarUpload } from '@/components/profile/AvatarUpload'
import { ChangePassword } from '@/components/profile/ChangePassword'

export function SettingsPage() {
  const { user, updateUser } = useAuth()
  const [activeTab, setActiveTab] = useState<'profile' | 'account' | 'privacy'>('profile')

  return (
    <div className="container mx-auto px-4 py-8">
      <h1 className="text-3xl font-bold mb-8">Settings</h1>

      {/* Tabs */}
      <div className="flex gap-4 border-b border-slate-700 mb-8">
        <button
          onClick={() => setActiveTab('profile')}
          className={`px-4 py-2 font-medium ${
            activeTab === 'profile'
              ? 'text-blue-400 border-b-2 border-blue-400'
              : 'text-slate-400 hover:text-slate-300'
          }`}
        >
          Profile
        </button>
        <button
          onClick={() => setActiveTab('account')}
          className={`px-4 py-2 font-medium ${
            activeTab === 'account'
              ? 'text-blue-400 border-b-2 border-blue-400'
              : 'text-slate-400 hover:text-slate-300'
          }`}
        >
          Account
        </button>
        <button
          onClick={() => setActiveTab('privacy')}
          className={`px-4 py-2 font-medium ${
            activeTab === 'privacy'
              ? 'text-blue-400 border-b-2 border-blue-400'
              : 'text-slate-400 hover:text-slate-300'
          }`}
        >
          Privacy
        </button>
      </div>

      {/* Tab Content */}
      {activeTab === 'profile' && (
        <div className="space-y-8">
          <AvatarUpload
            currentAvatar={user?.avatarUrl || null}
            onUploadSuccess={(url) => updateUser({ ...user!, avatarUrl: url })}
          />
        </div>
      )}

      {activeTab === 'account' && (
        <div className="space-y-8">
          <ChangePassword />
        </div>
      )}

      {activeTab === 'privacy' && (
        <div className="space-y-6">
          <h2 className="text-2xl font-bold">Privacy Settings</h2>
          <div className="space-y-4">
            <label className="flex items-center gap-3">
              <input type="checkbox" className="w-4 h-4" />
              <span>Show my activity publicly</span>
            </label>
            <label className="flex items-center gap-3">
              <input type="checkbox" className="w-4 h-4" />
              <span>Allow others to see my email</span>
            </label>
          </div>
        </div>
      )}
    </div>
  )
}
```

---

## Summary

### Key Features

1. **Display Profile**: Show user info, stats, and activity
2. **Edit Profile**: Update display name, bio, location, website
3. **Avatar Upload**: Upload and preview profile pictures
4. **Password Change**: Secure password update with validation
5. **Activity History**: Track user contributions
6. **Settings**: Tabbed interface for profile, account, privacy

### Best Practices

- ✅ Validate all inputs with Zod
- ✅ Show loading and error states
- ✅ Optimize images (max size, format)
- ✅ Secure password changes
- ✅ Track user activity
- ✅ Respect privacy settings

---

Next: [Password Reset →](/en/react/7.auth-module/5.password-reset)
