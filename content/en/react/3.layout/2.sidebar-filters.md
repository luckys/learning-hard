---
title: Sidebar & Filters - Dynamic Navigation
description: Build a dynamic sidebar with category navigation, filters, and mobile responsiveness. Learn state management across routes and persistent UI patterns.
---

# Disclaimer

:::u-alert
---
title: Comments in the code are for educational purposes only.
description: In real projects, avoid adding irrelevant or redundant comments.
color: warning
variant: subtle
icon: i-lucide-triangle-alert
---
:::

The sidebar provides quick navigation and filtering. It's context-aware: showing different content based on the current page.

**Prerequisites**: Make sure you've read [App Shell](/en/react/3.layout/1.app-shell) first, which covers React fundamentals like `useState`, `useLocation`, and conditional rendering.

---

## Sidebar Contexts

Our sidebar changes based on the route:

| Route | Sidebar Content |
|-------|----------------|
| `/threads` | Thread filters (All, My Threads, Bookmarked, etc.) + Categories |
| `/` (Home) | Categories list + Quick stats |
| Others | Hidden (thread detail, auth pages) |

---

## Sidebar Component

```tsx
// src/components/layout/Sidebar.tsx

import { useLocation } from 'react-router-dom'
import { ThreadFilters } from './ThreadFilters'
import { CategoriesNav } from './CategoriesNav'

/**
 * Sidebar - Contextual navigation and filters
 * 
 * Shows different content based on current route.
 * Sticky positioning keeps it visible when scrolling.
 */
export function Sidebar() {
  const location = useLocation()

  /**
   * Render different sidebar content based on route
   */
  if (location.pathname === '/threads') {
    return <ThreadsSidebar />
  }

  if (location.pathname === '/') {
    return <HomeSidebar />
  }

  return null
}

/**
 * ThreadsSidebar - Filters for threads page
 * 
 * Allows users to filter threads by:
 * - All threads
 * - My threads (created by me)
 * - Recent activity
 * - Bookmarked threads
 * - By category
 */
function ThreadsSidebar() {
  return (
    <div className="sticky top-20 space-y-6">
      {/* New Thread Button */}
      <Link
        to="/threads/new"
        className="flex items-center justify-center gap-2 w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium"
      >
        <span>âœï¸</span>
        <span>New Thread</span>
      </Link>

      {/* Thread Filters */}
      <div>
        <h3 className="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-3">
          Filters
        </h3>
        <ThreadFilters />
      </div>

      {/* Categories Navigation */}
      <div>
        <h3 className="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-3">
          Categories
        </h3>
        <CategoriesNav />
      </div>
    </div>
  )
}

/**
 * HomeSidebar - Quick navigation for homepage
 */
function HomeSidebar() {
  return (
    <div className="sticky top-20 space-y-6">
      {/* Quick Stats */}
      <div className="p-4 bg-slate-900 rounded-lg border border-slate-800">
        <h3 className="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-3">
          Community Stats
        </h3>
        <div className="space-y-2 text-sm">
          <StatItem label="Threads" value="1,204" />
          <StatItem label="Posts" value="15,832" />
          <StatItem label="Members" value="342" />
        </div>
      </div>

      {/* Popular Categories */}
      <CategoriesNav limit={5} />
    </div>
  )
}

function StatItem({ label, value }: { label: string; value: string }) {
  return (
    <div className="flex justify-between">
      <span className="text-slate-400">{label}</span>
      <span className="font-medium text-slate-100">{value}</span>
    </div>
  )
}
```

---

## Thread Filters Component

```tsx
// src/components/layout/ThreadFilters.tsx

import { Link, useSearchParams } from 'react-router-dom'

type FilterType = 'all' | 'my' | 'recent' | 'bookmarked'

interface Filter {
  type: FilterType
  label: string
  icon: string
}

const filters: Filter[] = [
  { type: 'all', label: 'All Threads', icon: 'ğŸ“š' },
  { type: 'my', label: 'My Threads', icon: 'âœï¸' },
  { type: 'recent', label: 'Recent', icon: 'ğŸ•' },
  { type: 'bookmarked', label: 'Bookmarked', icon: 'ğŸ”–' },
]

/**
 * ThreadFilters - Filter buttons for threads page
 * 
 * Uses URL search params to persist filter state.
 * Example: /threads?filter=my
 * 
 * Benefits of URL params:
 * - Shareable (send link with specific filter)
 * - Bookmarkable
 * - Browser back/forward works
 * - SSR friendly
 */
export function ThreadFilters() {
  const [searchParams] = useSearchParams()
  const activeFilter = (searchParams.get('filter') as FilterType) || 'all'

  return (
    <nav className="space-y-1">
      {filters.map((filter) => (
        <FilterButton
          key={filter.type}
          filter={filter}
          isActive={activeFilter === filter.type}
        />
      ))}
    </nav>
  )
}

function FilterButton({ filter, isActive }: { filter: Filter; isActive: boolean }) {
  return (
    <Link
      to={`/threads?filter=${filter.type}`}
      className={`
        flex items-center gap-3 px-3 py-2 rounded-lg transition-colors
        ${
          isActive
            ? 'bg-slate-800 text-slate-100'
            : 'text-slate-400 hover:text-slate-200 hover:bg-slate-800/50'
        }
      `}
    >
      <span className="text-lg">{filter.icon}</span>
      <span className="text-sm font-medium">{filter.label}</span>
    </Link>
  )
}
```

---

## Categories Navigation

```tsx
// src/components/layout/CategoriesNav.tsx

import { Link } from 'react-router-dom'
import { useCategories } from '@/features/categories/hooks/useCategories'

interface CategoriesNavProps {
  limit?: number  // Limit number of categories shown
}

/**
 * CategoriesNav - List of categories for sidebar navigation
 * 
 * Fetches categories from API and displays them.
 * Can limit display for homepage sidebar.
 */
export function CategoriesNav({ limit }: CategoriesNavProps) {
  const { categories, isLoading } = useCategories()

  if (isLoading) {
    return <CategoriesNavSkeleton />
  }

  /**
   * Filter to root categories (no parent)
   * Limit if specified
   */
  const rootCategories = categories
    .filter((cat) => cat.parentId === null)
    .slice(0, limit)

  return (
    <nav className="space-y-1">
      {rootCategories.map((category) => (
        <CategoryNavItem key={category.id} category={category} />
      ))}

      {limit && categories.length > limit && (
        <Link
          to="/categories"
          className="block px-3 py-2 text-sm text-blue-400 hover:text-blue-300"
        >
          View all categories â†’
        </Link>
      )}
    </nav>
  )
}

function CategoryNavItem({ category }: { category: Category }) {
  return (
    <Link
      to={`/categories/${category.slug}`}
      className="flex items-center gap-3 px-3 py-2 rounded-lg text-slate-400 hover:text-slate-200 hover:bg-slate-800/50 transition-colors"
    >
      {/* Icon with color indicator */}
      <div className="w-2 h-2 rounded-full bg-blue-500" />
      
      {/* Category name */}
      <span className="text-sm flex-1">{category.name}</span>
      
      {/* Thread count */}
      <span className="text-xs text-slate-500">
        {category.threadCount}
      </span>
    </Link>
  )
}

function CategoriesNavSkeleton() {
  return (
    <div className="space-y-1 animate-pulse">
      {[...Array(5)].map((_, i) => (
        <div key={i} className="h-9 bg-slate-800 rounded-lg" />
      ))}
    </div>
  )
}
```

---

## Mobile Sidebar (Drawer)

On mobile, sidebar becomes a slide-out drawer:

```tsx
// src/components/layout/MobileSidebar.tsx

import { useState } from 'react'
import { Sidebar } from './Sidebar'

/**
 * MobileSidebar - Drawer for mobile devices
 * 
 * Triggered by hamburger menu button.
 * Slides in from left with backdrop.
 */
export function MobileSidebar() {
  const [isOpen, setIsOpen] = useState(false)

  return (
    <>
      {/* Hamburger button */}
      <button
        onClick={() => setIsOpen(true)}
        className="lg:hidden p-2 text-slate-400 hover:text-slate-200"
        aria-label="Open menu"
      >
        â˜°
      </button>

      {/* Drawer */}
      {isOpen && (
        <>
          {/* Backdrop */}
          <div
            className="fixed inset-0 bg-black/50 z-40 lg:hidden"
            onClick={() => setIsOpen(false)}
          />

          {/* Drawer panel */}
          <div className="fixed top-0 left-0 bottom-0 w-64 bg-slate-900 z-50 lg:hidden overflow-y-auto">
            {/* Close button */}
            <div className="flex justify-end p-4">
              <button
                onClick={() => setIsOpen(false)}
                className="p-2 text-slate-400 hover:text-slate-200"
                aria-label="Close menu"
              >
                âœ•
              </button>
            </div>

            {/* Sidebar content */}
            <div className="px-4 pb-4">
              <Sidebar />
            </div>
          </div>
        </>
      )}
    </>
  )
}
```

---

## Sticky Positioning

The sidebar uses `sticky` positioning to stay visible during scroll:

```tsx
<div className="sticky top-20 space-y-6">
  {/* Sidebar content */}
</div>
```

**How sticky works:**
- `sticky`: Acts like `relative` until scroll threshold
- `top-20`: Sticks 80px (5rem) from top (below navbar)
- Stays in place until parent scrolls out of view

**Visual:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navbar (fixed)          â”‚ â† Always visible
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Sidebar â”‚ Main Content  â”‚
â”‚ (sticky)â”‚               â”‚
â”‚    â†“    â”‚    Scrolls    â”‚
â”‚  Stays  â”‚      â†“        â”‚
â”‚   here  â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Persistent State with URL

Filters use URL search params for persistence:

```tsx
// Reading from URL
const [searchParams] = useSearchParams()
const filter = searchParams.get('filter') || 'all'

// Writing to URL
<Link to={`/threads?filter=my`}>My Threads</Link>

// Programmatic update
const [searchParams, setSearchParams] = useSearchParams()
setSearchParams({ filter: 'my' })
```

**Benefits:**
- **Shareable**: Send `/threads?filter=my` to friend
- **Bookmarkable**: Save filtered view
- **Back button works**: Browser history tracks changes
- **No localStorage needed**: URL is source of truth

---

## Summary

### Key Patterns

1. **Context-aware UI**: Different content per route
2. **Sticky positioning**: Sidebar stays visible
3. **URL state**: Filters persist in search params
4. **Mobile drawer**: Slide-out menu on small screens
5. **Progressive disclosure**: Show more link when limited

### Best Practices

- âœ… Use URL params for shareable filters
- âœ… Sticky positioning for navigation
- âœ… Mobile-first responsive design
- âœ… Loading skeletons for better UX
- âœ… Limit items, provide "view all" link

---

Next: [Footer & Breadcrumbs â†’](/en/react/2.5.layout/3.footer-breadcrumbs)
