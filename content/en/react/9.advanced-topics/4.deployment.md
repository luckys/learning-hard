---
title: Deployment - Production Build & Hosting (Vercel, Cloudflare, AWS)
description: Master production deployment: build optimization, environment configuration, and hosting on Vercel, Cloudflare Pages, AWS S3+CloudFront, and Docker.
---

# Disclaimer

:::u-alert
---
title: Comments in the code are for educational purposes only.
description: In real projects, avoid adding irrelevant or redundant comments.
color: warning
variant: subtle
icon: i-lucide-triangle-alert
---
:::

Deployment is where your forum goes live. **Production is different from development.** We need optimization, security, monitoring, and reliability.

---

## Production Build: Optimization

```bash
# Build optimized production bundle
npm run build

# Output: dist/ folder with:
# - Minified JavaScript (gzip ~50KB)
# - Tree-shaken dependencies
# - Code splitting (lazy chunks)
# - Optimized CSS
# - Hashed filenames (cache busting)

# Analyze bundle size
npm run build -- --analyze
```

**What happens during build:**
1. **Minification**: Remove whitespace, shorten variable names
2. **Tree-shaking**: Remove unused code
3. **Code splitting**: Split into chunks for lazy loading
4. **CSS optimization**: Remove unused styles
5. **Asset hashing**: Add hash to filenames for cache busting

---

## Environment Variables: Secrets Management

```env
# .env.development
VITE_API_URL=http://localhost:3001/api
VITE_WS_URL=ws://localhost:3001

# .env.production
VITE_API_URL=https://api.yourforum.com
VITE_WS_URL=wss://api.yourforum.com

# .env.production.local (NEVER commit!)
VITE_SENTRY_DSN=https://...@sentry.io/...
VITE_ANALYTICS_KEY=...
```

**Best practices:**
- Prefix with `VITE_` (exposed to client)
- Use `.env.local` for secrets (add to .gitignore)
- Use CI/CD secrets for sensitive data
- Rotate secrets regularly
- Never commit `.env.local`
- Never expose API keys in client code

---

## Deployment Platforms

### 1. Vercel (Recommended for React)

**Pros:**
- Optimized for Next.js/React
- Automatic deployments from Git
- Built-in CDN
- Edge Functions
- Free tier generous

**Setup:**

```bash
# Install Vercel CLI
npm install -g vercel

# Deploy
vercel

# Deploy to production
vercel --prod
```

**vercel.json configuration:**

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "env": {
    "VITE_API_URL": "@api_url",
    "VITE_WS_URL": "@ws_url"
  },
  "redirects": [
    {
      "source": "/old-path",
      "destination": "/new-path",
      "permanent": true
    }
  ],
  "headers": [
    {
      "source": "/api/:path*",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=3600"
        }
      ]
    }
  ]
}
```

### 2. Cloudflare Pages

**Pros:**
- Global CDN (fastest)
- Free tier with unlimited bandwidth
- Workers for serverless functions
- DDoS protection included

**Setup:**

```bash
# Install Wrangler CLI
npm install -g wrangler

# Deploy
wrangler pages deploy dist
```

**wrangler.toml configuration:**

```toml
name = "forum"
main = "src/index.ts"
compatibility_date = "2024-01-15"

[env.production]
vars = { VITE_API_URL = "https://api.yourforum.com" }

[[routes]]
pattern = "/api/*"
zone_name = "yourforum.com"
```

### 3. AWS S3 + CloudFront

**Pros:**
- Highly scalable
- Pay-as-you-go
- Full control
- Global CDN

**Setup:**

```bash
# Build
npm run build

# Upload to S3
aws s3 sync dist/ s3://yourforum-bucket/ --delete

# Invalidate CloudFront cache
aws cloudfront create-invalidation \
  --distribution-id E123ABC \
  --paths "/*"
```

**CloudFormation template (Infrastructure as Code):**

```yaml
Resources:
  S3Bucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: yourforum-bucket
      VersioningConfiguration:
        Status: Enabled
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        BlockPublicPolicy: true
        IgnorePublicAcls: true
        RestrictPublicBuckets: true

  CloudFrontDistribution:
    Type: AWS::CloudFront::Distribution
    Properties:
      DistributionConfig:
        DefaultCacheBehavior:
          ViewerProtocolPolicy: redirect-to-https
          CachePolicyId: 658327ea-f89d-4fab-a63d-7e88639e58f6
          OriginRequestPolicyId: 216adef5-5c7f-47e4-b989-5492eafa07d3
        Origins:
          - DomainName: yourforum-bucket.s3.amazonaws.com
            Id: S3Origin
            S3OriginConfig: {}
        Enabled: true
        DefaultRootObject: index.html
```

### 4. Docker + Container Registry

**Pros:**
- Works anywhere
- Reproducible
- Easy scaling

**Dockerfile:**

```dockerfile
# Build stage
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build

# Production stage
FROM node:18-alpine

WORKDIR /app

# Install serve to run SPA
RUN npm install -g serve

# Copy built app from builder
COPY --from=builder /app/dist ./dist

EXPOSE 3000

# Health check
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD node -e "require('http').get('http://localhost:3000', (r) => {if (r.statusCode !== 200) throw new Error(r.statusCode)})"

CMD ["serve", "-s", "dist", "-l", "3000"]
```

**Deploy to Docker Hub:**

```bash
# Build
docker build -t yourforum:latest .

# Tag
docker tag yourforum:latest yourusername/yourforum:latest

# Push
docker push yourusername/yourforum:latest

# Run locally
docker run -p 3000:3000 yourusername/yourforum:latest
```

---

## Monitoring & Error Tracking

```typescript
// src/lib/sentry.ts

import * as Sentry from "@sentry/react"

Sentry.init({
  dsn: import.meta.env.VITE_SENTRY_DSN,
  environment: import.meta.env.MODE,
  tracesSampleRate: 1.0,
  integrations: [
    new Sentry.Replay({
      maskAllText: true,
      blockAllMedia: true,
    }),
  ],
})

// Wrap app
export const SentryRoutes = Sentry.withSentryRouting(Routes)
```

---

## Pre-Deployment Checklist

- All tests passing (`npm run test`)
- No console errors/warnings
- Bundle size analyzed (`npm run build -- --analyze`)
- Environment variables configured
- API endpoints tested
- SSL certificate installed
- CORS configured correctly
- Error monitoring setup (Sentry)
- Analytics configured
- Backup strategy in place
- Rollback plan documented

---

## Post-Deployment Monitoring

```typescript
// Monitor performance
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals'

getCLS(metric => console.log('CLS:', metric.value))
getFID(metric => console.log('FID:', metric.value))
getFCP(metric => console.log('FCP:', metric.value))
getLCP(metric => console.log('LCP:', metric.value))
getTTFB(metric => console.log('TTFB:', metric.value))

// Good targets:
// LCP: < 2.5s
// FID: < 100ms
// CLS: < 0.1
```

---

## Deployment Comparison

| Platform | Cost | Setup | Performance | Best For |
|----------|------|-------|-------------|----------|
| **Vercel** | Free + paid | 5 min | Excellent | React/Next.js |
| **Cloudflare** | Free + paid | 5 min | Excellent | Global reach |
| **AWS** | Pay-as-you-go | 30 min | Excellent | Enterprise |
| **Docker** | Self-hosted | 15 min | Depends | Full control |

---

## ðŸŽ‰ Congratulations!

You've completed the React Forum documentation!

You now know:
- React fundamentals (components, state, effects, hooks)
- Advanced patterns (Context, Custom Hooks, Portals)
- Forms and validation (React Hook Form, Zod)
- Routing and navigation (React Router)
- Authentication and authorization
- Error handling and resilience
- Performance optimization
- Testing strategies (unit, integration)
- Production deployment

**You've built a complete, production-ready React forum from scratch!**

---

## Next Steps

1. **Build your own forum** with unique features
2. **Contribute to open source** React projects
3. **Learn React frameworks** (Next.js, Remix)
4. **Master state management** (Zustand, Redux)
5. **Explore React Native** for mobile
6. **Learn backend** (Node.js, databases)
7. **DevOps skills** (CI/CD, monitoring, scaling)

Keep building! ðŸš€
